!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.streakjs=e():t.streakjs=e()}(this,function(){return i={},r.m=n=[function(t,i,e){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o=e(47),a=e(23),s=e(1),f=e(3),p=e(7);i.shapes={};var l,h=(l=o.DisplayObject,n(c,l),Object.defineProperty(c.prototype,"centroid",{get:function(){return this._centroid},set:function(t){this._centroid=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"colorKey",{get:function(){return this._colorKey},set:function(t){this._colorKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hitStrokeWidth",{get:function(){return this._hitStrokeWidth},set:function(t){this._hitStrokeWidth=t,this.setAttr("hitStrokeWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"perfectDrawEnabled",{get:function(){return this._perfectDrawEnabled},set:function(t){this._perfectDrawEnabled=t,this.setAttr("perfectDrawEnabled",t)},enumerable:!0,configurable:!0}),c.prototype.getContext=function(){return this.getLayer().getContext()},c.prototype.getCanvas=function(){return this.getLayer().getCanvas()},c.prototype.getStrokeHitEnabled=function(){return 0!==this._hitStrokeWidth},c.prototype.setStrokeHitEnabled=function(t){this._hitStrokeWidth=t?"auto":0},c.prototype.useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this._perfectDrawEnabled||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},c.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.contextWrapper.clear(),this.drawHit(e),0<e.contextWrapper.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]},c.prototype.destroy=function(){return l.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this},c.prototype.getSelfRect=function(){var t=this.size;return{x:this._centroid?Math.round(-t.width/2):0,y:this._centroid?Math.round(-t.height/2):0,width:t.width,height:t.height}},c.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,n=t.relativeTo,i=this.getSelfRect(),r=!t.skipStroke&&this.hasStroke()&&this.strokeWidth||0,o=i.width+r,a=i.height+r,s=!t.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX:0,h=s?this.shadowOffsetY:0,c=o+Math.abs(l),u=a+Math.abs(h),f=s&&this.shadowBlur||0,p=c+2*f,d=u+2*f,g=0;Math.round(r/2)!==r/2&&(g=1);var _={width:p+g,height:d+g,x:-Math.round(r/2+f)+Math.min(l,0)+i.x,y:-Math.round(r/2+f)+Math.min(h,0)+i.y};return e?_:this.transformedRect(_,n)},c.prototype.drawScene=function(t,e,n,i){var r,o,a,s=this.getLayer(),l=t||s.getCanvas(),h=l.contextWrapper,c=this.caches.getCanvasCache(),u=this._getSceneFunc(),f=this.hasShadow(),p=this.hasStroke();if(!this.isVisible()&&!n)return this;if(c)return h.save(),s.applyTransform(this,h,e),this.caches.drawCachedSceneCanvas(h),h.restore(),this;if(!u)return this;if(h.save(),a=(o=(r=this.getStage())&&r.bufferCanvas)&&o.contextWrapper,this.useBufferCanvas(n)&&!i&&a){if(a.clear(),a.save(),a.applyLineJoin(this),!n)if(s)s.applyTransform(this,a,e);else{var d=this.getAbsoluteTransform(e).getMatrix();h.transform(d[0],d[1],d[2],d[3],d[4],d[5])}u.call(this,a,this),a.restore();var g=o.pixelRatio;f&&!l.hitCanvas?(h.save(),h.applyShadow(this),h.applyOpacity(this),h.applyGlobalCompositeOperation(this),h.drawImage(o.canvasElement,0,0,o.width/g,o.height/g),h.restore()):(h.applyOpacity(this),h.applyGlobalCompositeOperation(this),h.drawImage(o.canvasElement,0,0,o.width/g,o.height/g))}else{if(h.applyLineJoin(this),!n)if(s)s.applyTransform(this,h,e);else{var _=this.getAbsoluteTransform(e).getMatrix();h.transform(_[0],_[1],_[2],_[3],_[4],_[5])}f&&p&&!l.hitCanvas?(h.save(),n||(h.applyOpacity(this),h.applyGlobalCompositeOperation(this)),h.applyShadow(this),u.call(this,h,this),h.restore(),this.hasFill()&&this.shadowForStrokeEnabled&&u.call(this,h,this)):f&&!l.hitCanvas?(h.save(),n||(h.applyOpacity(this),h.applyGlobalCompositeOperation(this)),h.applyShadow(this),u.call(this,h,this),h.restore()):(n||(h.applyOpacity(this),h.applyGlobalCompositeOperation(this)),u.call(this,h,this))}return h.restore(),this},c.prototype.drawHit=function(t,e,n){var i=this.getLayer(),r=t||i.hitCanvas,o=r&&r.contextWrapper,a=this._getHitFunc()||this._getSceneFunc(),s=this.caches.getCanvasCache(),l=s&&s.hit;if(this.colorKey||f.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()"),!this.shouldDrawHit()&&!n)return this;if(l)return o.save(),i.applyTransform(this,o,e),this.caches.drawCachedHitCanvas(o),o.restore(),this;if(!a)return this;if(o.save(),o.applyLineJoin(this),!n)if(i)i.applyTransform(this,o,e);else{var h=this.getAbsoluteTransform(e).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,o,this),o.restore(),this},c.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,n,i,r,o,a=this.caches.getCanvasCache(),s=this.caches.getCachedSceneCanvas(),l=a.hit,h=l.contextWrapper,c=l.width,u=l.height;h.clear(),h.drawImage(s.canvasElement,0,0,c,u);try{for(i=(n=(e=h.getImageData(0,0,c,u)).data).length,r=p.hexToRgb(this.colorKey),o=0;o<i;o+=4)t<n[o+3]?(n[o]=r.r,n[o+1]=r.g,n[o+2]=r.b,n[o+3]=255):n[o+3]=0;h.putImageData(e,0,0)}catch(t){f.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},c.prototype.getFillPattern=function(){return this.caches.getCache("patternImage",this.__getFillPattern)},c.prototype.__getFillPattern=function(){if(this.fillPatternImage)return s.default.getDummyContext().createPattern(this.fillPatternImage,this.fillPatternRepeat||"repeat")},c.prototype.getLinearGradient=function(){return this.caches.getCache("linearGradient",this.__getLinearGradient)},c.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops;if(t&&0<t.length){for(var e=s.default.getDummyContext(),n=this.fillLinearGradientStartPoint,i=this.fillLinearGradientEndPoint,r=e.createLinearGradient(n.x,n.y,i.x,i.y),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}},c.prototype.getRadialGradient=function(){return this.caches.getCache("radialGradient",this.__getRadialGradient)},c.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops;if(t&&0<t.length){for(var e=s.default.getDummyContext(),n=this.fillRadialGradientStartPoint,i=this.fillRadialGradientEndPoint,r=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius,i.x,i.y,this.fillRadialGradientEndRadius),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}},c.prototype.hasPointerCapture=function(t){return a.hasPointerCapture(t,this)},c.prototype.setPointerCapture=function(t){a.setPointerCapture(t,this)},c.prototype.releaseCapture=function(t){a.releaseCapture(t,this)},c.prototype._getSceneFunc=function(){return this._sceneFunc?this._sceneFunc:this.sceneRender},c.prototype._getHitFunc=function(){return this._hitFunc?this._hitFunc:this.hitRender},c);function c(t){var e,n=l.call(this,t)||this;for(t=t||{},n.nodeType="Shape",n._centroid=!1,n._hitStrokeWidth=null==t.hitStrokeWidth?"auto":t.hitStrokeWidth,n._perfectDrawEnabled=null==t.perfectDrawEnabled||t.perfectDrawEnabled,n._sceneFunc=null==t.sceneFunc?null:t.sceneFunc,n._hitFunc=null==t.hitFunc?null:t.hitFunc;!(e=p.getRandomColor())||e in i.shapes;);return n._colorKey=e,i.shapes[e]=n}i.Shape=h},function(t,n,l){"use strict";(function(i){Object.defineProperty(n,"__esModule",{value:!0});var r=l(38),o=l(39),a=l(40),t=(s.prototype.getGlobal=function(){return this._adapter?this._adapter.getGlobal():null},s.prototype.setGlobal=function(t){this._adapter&&this._adapter.setGlobal(t)},s.prototype.getCanvasRef=function(){return this._adapter?this._adapter.getCanvasRef():null},s.prototype.setCanvasRef=function(t){this._adapter&&this._adapter.setCanvasRef(t)},s.prototype.createImageElement=function(){return this._adapter?this._adapter.createImageElement():null},s.prototype.createCanvasElement=function(){return this._adapter?this._adapter.createCanvasElement():null},s.prototype.createOffScreenCanvasElement=function(){return this._adapter?this._adapter.createOffScreenCanvasElement():null},s.prototype.getDevicePixelRatio=function(){return this._adapter?this._adapter.getDevicePixelRatio():null},s.prototype.now=function(){return this._adapter?this._adapter.now():null},s.prototype.requestAnimationFrame=function(t){return this._adapter?this._adapter.requestAnimationFrame(t):null},s.prototype.cancelAnimationFrame=function(t){if(this._adapter)return this._adapter.cancelAnimationFrame(t)},s.prototype.getDummyContext=function(){return this._adapter?this._adapter.getDummyContext():null},s.getInstance=function(){var t="undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),e="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync,n=void 0!==i&&"[object global]"==={}.toString.call(i);return s._instance||(t?(s._instance=new s(new r.default)).isBrowser=!0:e?(s._instance=new s(new o.default)).isWx=!0:n?(s._instance=new s(new a.default)).isNode=!0:s._instance=new s(new r.default)),s._instance},s);function s(t){this.isBrowser=!1,this.isWx=!1,this.isNode=!1,this._adapter=t,this._adapter&&(this.supportPointerEvents=this._adapter.supportPointerEvents,this.supportTouchEvents=this._adapter.supportTouchEvents,this.enableBuffer=this._adapter.enableBuffer)}var e=(n.Adaptive=t).getInstance();n.default=e}).call(this,l(21))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(31);e.initValue=function(t,e){return t=null!=t?t:e},e.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.cloneObject=function(t){var e={};for(var n in t)i.isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):i.isArray(t[n])?e[n]=r.cloneArray(t[n]):e[n]=t[n];return e},e.assign=function(t,e){for(var n in e)t[n]=e[n];return t},e.extend=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var i=t.prototype;for(var r in t.prototype=new n,i)i.hasOwnProperty(r)&&(t.prototype[r]=i[r]);t.__super__=e.prototype,t.super=e},e.destroyObject=function(t,e){for(var n in t)e&&-1<e.indexOf(n)||delete t[n]},e.classApply=function(t,e){return e?(e=[null].concat(e),new(t.bind.apply(t,e))):new t},e.hasProp=function(t,e){return!!t&&void 0!==t[e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);e.error=function(t){console.error(t)},e.warn=function(t){i.default.showWarnings&&console.warn(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){return t!=t}e.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},e.isPlainObject=function(t){return!!t&&t.constructor===Object},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!i(t)&&isFinite(t)},e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.isBoolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},e.isObject=function(t){return t instanceof Object},e.isValidSelector=function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},e.isUndefined=function(t){return void 0===t},e.isNaN=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={inDblClickWindow:!1,dblClickWindow:400,_pointerEventsEnabled:!1,enableTrace:!1,showWarnings:!1,dragDistance:3,dragButtons:[0,1],listenClickTap:!1,pixelRatio:void 0,captureTouchEventsEnabled:!1,hitOnDragEnabled:!1,angleDeg:!0,maxLayerNumber:5,ns1:["streakjs"],ns2:["shapes"]};e.default=i},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function o(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}}e.rgbToHex=function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},e.rgbToString=function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"},e.hexToRgb=o,e.getRandomColor=function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},e.getRGB=function(t){var e;return t in r?{r:(e=r[t])[0],g:e[1],b:e[2]}:"#"===t[0]?o(t.substring(1)):"rgb("===t.substr(0,4)?(e=i.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},e.colorToRGBA=function(t){return function(t){var e=r[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null}(t=t||"black")||function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}}(t)||function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}}(t)||function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}}(t)||function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}(t)||function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=(e[0],e.slice(1)),i=Number(n[0])/360,r=Number(n[1])/100,o=Number(n[2])/100,a=void 0,s=void 0,l=void 0;if(0==r)return l=255*o,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};for(var h=2*o-(a=o<.5?o*(1+r):o+r-o*r),c=[0,0,0],u=0;u<3;u++)(s=i+1/3*-(u-1))<0&&s++,1<s&&s--,l=6*s<1?h+6*(a-h)*s:2*s<1?a:3*s<2?h+(a-h)*(2/3-s)*6:h,c[u]=255*l;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}}(t)}},,,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(20),s=n(13),l=n(3),h=n(1),c=[],u=(o=a.Container,r(f,o),Object.defineProperty(f.prototype,"width",{get:function(){if(this.parent)return this.parent.width},set:function(t){l.warn('Can not change width of layer. Use "stage.width = val" function instead.')},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){if(this.parent)return this.parent.height},set:function(t){l.warn('Can not change height of layer. Use "stage.height = val" function instead.')},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"size",{get:function(){if(this.parent)return this.parent.size},set:function(t){this._canvas.setSize(t.width,t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hitGraphEnabled",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"zIndex",{get:function(){return o.prototype.getZIndex.call(this)},set:function(t){o.prototype.setZIndex.call(this,t);var e=this.getStage();e&&e.content&&(e.content.removeChild(this.getCanvas().canvasElement),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas().canvasElement,e.getChildren()[t+1].getCanvas().canvasElement):e.content.appendChild(this.getCanvas().canvasElement))},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"clearBeforeDraw",{get:function(){return this._clearBeforeDraw},set:function(t){this._clearBeforeDraw=t,this.setAttr("clearBeforeDraw",t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageSmoothingEnabled",{get:function(){return this._imageSmoothingEnabled},set:function(t){this._imageSmoothingEnabled=t,this.setAttr("imageSmoothingEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hitCanvas",{get:function(){return this._hitCanvas},set:function(t){this._hitCanvas=t},enumerable:!0,configurable:!0}),f.prototype.getCanvas=function(){return this._canvas},f.prototype.getContext=function(){return this.getCanvas().contextWrapper},f.prototype.clear=function(t){return this.getContext().clear(t),this},f.prototype.moveToTop=function(){o.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getCanvas().canvasElement),t.content.appendChild(this.getCanvas().canvasElement)),!0},f.prototype.moveUp=function(){if(!o.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content||(t.content.removeChild(this.getCanvas().canvasElement),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas().canvasElement,t.getChildren()[this.index+1].getCanvas().canvasElement):t.content.appendChild(this.getCanvas().canvasElement),0))},f.prototype.moveDown=function(){if(!o.prototype.moveDown.call(this))return!1;var t=this.getStage();if(t&&t.content){var e=t.getChildren();t.content.removeChild(this.getCanvas().canvasElement),t.content.insertBefore(this.getCanvas().canvasElement,e[this.index+1].getCanvas().canvasElement)}return!0},f.prototype.moveToBottom=function(){if(!o.prototype.moveToBottom.call(this))return!1;var t=this.getStage();if(t&&t.content){var e=t.getChildren();t.content.removeChild(this.getCanvas().canvasElement),t.content.insertBefore(this.getCanvas().canvasElement,e[1].getCanvas().canvasElement)}return!0},f.prototype.getLayer=function(){return this},f.prototype.remove=function(){var t=this.getCanvas().canvasElement;return o.prototype.remove.call(this),t&&t.parentNode&&this._isInDocument(t)&&t.parentNode.removeChild(t),this},f.prototype.getStage=function(){return this.parent},f.prototype.toCanvas=function(t){return(t=t||{}).width=t.width||this.width,t.height=t.height||this.height,t.x=void 0!==t.x?t.x:this.x,t.y=void 0!==t.y?t.y:this.y,o.prototype.toCanvas.call(this,t)},f.prototype.checkVisibility=function(){var t=this.visible;this._canvas.canvasElement.style.display=t?"block":"none"},f.prototype.checkSmooth=function(){this.getContext().context.imageSmoothingEnabled=this._imageSmoothingEnabled},f.prototype.checkGlobalCompositeOperation=function(){this.getContext().context.globalCompositeOperation=this.globalCompositeOperation},f.prototype.getIntersection=function(t,e){return null},f.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,this.__requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},f.prototype.applyTransform=function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},f.prototype.createPNGStream=function(){return this._canvas.canvasElement.createPNGStream()},f.prototype._isInDocument=function(t){if(!h.default.isBrowser)return!1;for(;t=t.parentNode;)if(t==h.default.getGlobal().document)return!0;return!1},f.prototype.__requestAnimFrame=function(t){c.push(t),1===c.length&&h.default.requestAnimationFrame(function(){var t=c;c=[],t.forEach(function(t){t()})})},f);function f(t){var e=o.call(this,t)||this;return e.nodeType="BaseLayer",t=t||{},e._clearBeforeDraw=null==t.clearBeforeDraw||t.clearBeforeDraw,e._imageSmoothingEnabled=null==t.imageSmoothingEnabled||t.imageSmoothingEnabled,e._waitingForDraw=!1,t.canvasElement?e._canvas=new s.SceneCanvas({canvasElement:t.canvasElement,offScreen:!1}):e._canvas=new s.SceneCanvas({offScreen:!1}),e.on("visibleChange",e.checkVisibility),e.checkVisibility(),e.on("imageSmoothingEnabledChange",e.checkSmooth),e.checkSmooth(),e.on("globalCompositeOperationChange",e.checkGlobalCompositeOperation),e.checkGlobalCompositeOperation(),e}e.BaseLayer=u},,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(37),l=n(13),s=n(17),c=n(42),_=n(5),h=n(3),y=n(1),u=n(2),f=n(4),p=n(43),b=n(14),d="absoluteOpacity",g="absoluteTransform",v="absoluteScale",m="listening",P="visible",x=["id"],w="mouseenter",O="mouseleave",S="transform",C=["xChange.__event","yChange.__event","scaleXChange.__event","scaleYChange.__event","skewXChange.__event","skewYChange.__event","rotationChange.__event","offsetXChange.__event","offsetYChange.__event","transformsEnabledChange.__event"].join(" "),E=["scaleXChange.__event","scaleYChange.__event"].join(" "),A=(o=a.NodeBase,r(k,o),Object.defineProperty(k.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.setAttr("zIndex",t),this.__setZIndex()},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"preventDefault",{get:function(){return this._preventDefault},set:function(t){this._preventDefault=t,this.setAttr("preventDefault",t)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable=t,this.setAttr("draggable",t),this.__dragChange()},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"dragDistance",{get:function(){return this._dragDistance},set:function(t){this._dragDistance=t,this.setAttr("dragDistance",t)},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"dragBoundFunc",{get:function(){return this._dragBoundFunc},set:function(t){this._dragBoundFunc=t},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"injectors",{get:function(){return this._injectors},set:function(t){this._injectors=t;for(var e=0,n=this._injectors;e<n.length;e++)n[e].host=this;this.updatedAfterInjection=!1},enumerable:!0,configurable:!0}),k.prototype.isListening=function(){return this.caches.getCache(m,this.__isListening)},k.prototype.isVisible=function(){return this.caches.getCache(P,this._isVisible)},k.prototype._isVisible=function(t){var e=this.visible,n=this.getParent();return"inherit"===e?!n||n===t||n._isVisible(t):e},k.prototype.getParent=function(){return this.parent},k.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},k.prototype.getZIndex=function(){return this.zIndex},k.prototype.setZIndex=function(t){this.zIndex=t},k.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},k.prototype.getStage=function(){return this.caches.getCache("stage",this.__getStage)},k.prototype.getTransform=function(){return this.caches.getCache(S,this.__getTransform)},k.prototype.getAbsoluteZIndex=function(){var n,i,r,o,a=this.getDepth(),s=this,l=0;return"Stage"!==s.nodeType&&function t(e){for(n=[],i=e.length,r=0;r<i;r++)o=e[r],l++,"Shape"!==o.nodeType&&(n=n.concat(o.getChildren().toArray())),o.uid===s.uid&&(r=i);0<n.length&&n[0].getDepth()<=a&&t(n)}(s.getStage().getChildren()),l},k.prototype.getAbsoluteOpacity=function(){return this.caches.getCache(d,this.__getAbsoluteOpacity)},k.prototype.getAbsoluteTransform=function(t){return t?this.__getAbsoluteTransform(t):this.caches.getCache(g,this.__getAbsoluteTransform)},k.prototype.getAbsoluteScale=function(t){return t?this.__getAbsoluteScale(t):this.caches.getCache(v,this.__getAbsoluteScale)},k.prototype.getAbsolutePosition=function(t){var e=this.getAbsoluteTransform(t).getMatrix(),n=new c.Transform,i=this.offset;return n.m=e.slice(),n.translate(i.x,i.y),n.getTranslation()},k.prototype.setAbsolutePosition=function(t){var e,n=this.__clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.position={x:t.x,y:t.y},this.__setTransform(n),this},k.prototype.move=function(t){var e=t.x,n=t.y,i=this.x,r=this.y;return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.position={x:i,y:r},this},k.prototype.moveToTop=function(){if(!this.parent)return h.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent.setChildrenIndices(),!0},k.prototype.moveUp=function(){if(!this.parent)return h.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent.setChildrenIndices(),!0)},k.prototype.moveDown=function(){if(!this.parent)return h.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent.setChildrenIndices(),!0)},k.prototype.moveToBottom=function(){if(!this.parent)return h.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent.setChildrenIndices(),!0)},k.prototype.moveTo=function(t){return this.getParent()!==t&&(this.__remove(),t.add(this)),this},k.prototype.rotate=function(t){return this.rotation=this.rotation+t,this},k.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.default.dragElements.remove(this.uid),this.__remove(),this},k.prototype.transformedRect=function(t,e){var n,i,r,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach(function(t){var e=s.point(t.x,t.y);void 0===n&&(n=r=e.x,i=o=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y)}),{x:n,y:i,width:r-n,height:o-i}},k.prototype.on=function(t,e){if(3===arguments.length)return this.__delegate.apply(this,arguments);var n,i,r,o,a=t.split(" "),s=a.length;for(n=0;n<s;n++)r=(i=a[n].split("."))[0],o=i[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:o,handler:e});return this},k.prototype.off=function(t,e){var n,i,r,o,a,s=(t||"").split(" "),l=s.length;if(!t)for(i in this.eventListeners)this.__off(i);for(n=0;n<l;n++)if(o=(r=s[n].split("."))[0],a=r[1],o)this.eventListeners[o]&&this.__off(o,a,e);else for(i in this.eventListeners)this.__off(i,a,e);return this},k.prototype.addEventListener=function(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this},k.prototype.removeEventListener=function(t){return this.off(t),this},k.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},k.prototype.fire=function(t,e,n){return(e=e||{}).target=e.target||this,n?this.fireAndBubble(t,e):this.__fire(t,e),this},k.prototype.fireAndBubble=function(t,e,n){if(e&&"Shape"===this.nodeType&&(e.target=this),t!==w&&t!==O||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this.__fire(t,e);var i=(t===w||t===O)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this.fireAndBubble.call(this.parent,t,e,n.parent):this.fireAndBubble.call(this.parent,t,e))}},k.prototype.fireAttrChange=function(t,e,n){this.__fire(t+"Change",{oldVal:e,newVal:n})},k.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():_.default.dragDistance},k.prototype.setDragPosition=function(t,e){var n=this.getStage().getPointerById(e.pointerId),i=this._dragBoundFunc;if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y};i&&(r=i.call(this,r,t)),this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=r}},k.prototype.startDrag=function(t){s.default.dragElements.containsKey(this.uid)||this.__createDragElement(t),s.default.dragElements.getValue(this.uid).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},k.prototype.stopDrag=function(t){var e=s.default.dragElements.getValue(this.uid);e&&(e.dragStatus="stopped"),s.default.endDragBefore(t),s.default.endDragAfter(t)},k.prototype.isDragging=function(){var t=s.default.dragElements.getValue(this.uid);return!!t&&"dragging"===t.dragStatus},k.prototype.getAncestors=function(){for(var t=this.getParent(),e=new Array;t;)e.push(t),t=t.getParent();return e},k.prototype.findAncestors=function(t,e,n){var i=[];e&&this.isMatch(t)&&i.push(this);for(var r=this.parent;r;){if(r===n)return i;r.isMatch(t)&&i.push(r),r=r.parent}return i},k.prototype.isAncestorOf=function(t){return!1},k.prototype.findAncestor=function(t,e,n){return this.findAncestors(t,e,n)[0]},k.prototype.isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,i=t.replace(/ /g,"").split(","),r=i.length;for(e=0;e<r;e++)if(n=i[e],f.isValidSelector(n)||(h.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),h.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".')),"#"===n.charAt(0)){if(this.id===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1},k.prototype.clone=function(t){var e,n,i,r,o,a=u.cloneObject(this.attrs);for(var s in x)delete a[x[s]];for(e in t)a[e]=t[e];var l=new this.constructor(a);for(e in this.eventListeners)for(i=(n=this.eventListeners[e]).length,r=0;r<i;r++)(o=n[r]).name.indexOf(".__event")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(o));return l},k.prototype.toJSON=function(){return JSON.stringify(this.toObject())},k.prototype.toObject=function(){var t,e,n,i={},r=this.getAttrs();for(t in i.attrs={},r)e=r[t],f.isObject(e)&&!f.isPlainObject(e)&&!f.isArray(e)||(n="function"==typeof this[t]&&this[t],delete r[t],(n?n.call(this):null)!==(r[t]=e)&&(i.attrs[t]=e));return i.className=this.getClassName(),this.__prepareToStringify(i)},k.prototype.toCanvas=function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),i=void 0!==t.x?t.x:e.x,r=void 0!==t.y?t.y:e.y,o=t.pixelRatio||1,a=new l.SceneCanvas({width:t.width||e.width||(n?n.width:0),height:t.height||e.height||(n?n.height:0),pixelRatio:o}),s=a.contextWrapper;return s.save(),(i||r)&&s.translate(-1*i,-1*r),this.drawScene(a),s.restore(),a},k.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,i=this.toCanvas(t).toDataURL(e,n);return t.callback&&t.callback(i),i},k.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method option argument";var e=t.callback;delete t.callback,this.__urlToImage(this.toDataURL(t),function(t){e(t)})},k.prototype.getAngle=function(t){return _.default.angleDeg?t*(Math.PI/180):t},k.prototype.getCanvas=function(){return null},k.prototype.hasChildren=function(){return!1},k.prototype.getChildren=function(){return new Array},k.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},k.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled&&this.isListening()&&this.isVisible()},k.prototype.cache=function(t){this.caches.setCanvasCache(t)},k.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},k.load=function(t,e){var n;n=f.isString(t)?JSON.parse(t):t;var i=this.__getNodeTypes();return this.__createNode(i,n,e)},k.__createNode=function(t,e,n){var i,r,o,a=e.className,s=e.children;if(a){if(n&&(e.attrs.container=n),t.getValue(a)||(h.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape"),i=new(t.getValue(a))(e.attrs),s)for(r=s.length,o=0;o<r;o++)i.add(k.__createNode(t,s[o]));return i}},k.__getNodeTypes=function(){for(var t=["Stage","Layer","Shape","Group"],e=new b.Dictionary,n=_.default.ns1,i=_.default.ns2,r=0,o=n;r<o.length;r++){var a=o[r];if(void 0!==y.default.getGlobal()[a]){for(var s=y.default.getGlobal()[a],l=0,h=t;l<h.length;l++){var c=h[l];s[c]&&e.setValue(c,s[c])}for(var u=0,f=i;u<f.length;u++){var p=f[u];if(void 0!==s[p]){var d=s[p];for(var g in d)e.setValue(g,d[g])}}}}return e},k.prototype.__prepareToStringify=function(t){var e;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||this.__isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===this.__prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},k.prototype.__isElement=function(t){return!(!t||1!=t.nodeType)},k.prototype.__urlToImage=function(t,e){var n=y.default.createImageElement();n&&(n.onload=function(){e(n)},n.src=t)},k.prototype.__setZIndex=function(){if(this.parent)if(this.zIndex<0||this._zIndex>=this.parent.children.length)h.warn("Unexpected value "+this._zIndex+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");else{var t=this.index;this.parent.children.splice(t,1),this.parent.children.splice(this._zIndex,0,this),this.parent.setChildrenIndices()}else h.warn("Node has no parent. zIndex parameter is ignored.")},k.prototype.__dragChange=function(){this._draggable?this.__listenDrag():(this.__dragCleanup(),this.getStage()&&s.default.dragElements.containsKey(this.uid)&&this.stopDrag())},k.prototype.__dragCleanup=function(){this.off("mousedown.__event"),this.off("touchstart.__event")},k.prototype.__getAbsoluteOpacity=function(){var t=this.opacity,e=this.getParent();return e&&!e.isUnderCache&&(t*=e.getAbsoluteOpacity()),t},k.prototype.__getTransform=function(){var t=new c.Transform,e=this.x,n=this.y,i=this.getAngle(this.rotation),r=this.scaleX,o=this.scaleY,a=this.skewX,s=this.skewY,l=this.offsetX,h=this.offsetY;return 0===e&&0===n||t.translate(e,n),0!==i&&t.rotate(i),0===a&&0===s||t.skew(a,s),1===r&&1===o||t.scale(r,o),0===l&&0===h||t.translate(-1*l,-1*h),t},k.prototype.__createDragElement=function(t){var e=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),r=n.getPointerById(e)||n.changedPointerPositions[0]||i;s.default.dragElements.setValue(this.uid,{node:this,startPointerPos:r,offset:{x:r.x-i.x,y:r.y-i.y},dragStatus:"ready",pointerId:e})},k.prototype.__delegate=function(t,i,r){var o=this;this.on(t,function(t){for(var e=t.target.findAncestors(i,!0,o),n=0;n<e.length;n++)(t=u.cloneObject(t)).currentTarget=e[n],r.call(e[n],t)})},k.prototype.__off=function(t,e,n){var i,r,o,a=this.eventListeners[t];for(i=0;i<a.length;i++)if(r=a[i].name,o=a[i].handler,!("__event"===r&&"__event"!==e||e&&r!==e||n&&n!==o)){if(a.splice(i,1),0===a.length){delete this.eventListeners[t];break}i--}},k.prototype.__getAbsoluteTransform=function(t){var n=new c.Transform;return this.__eachAncestorReverse(function(t){var e=t.transformsEnabled;"all"===e?n.multiply(t.getTransform()):"position"===e&&n.translate(t.x-t.offsetX,t.y-t.offsetY)},t),n},k.prototype.__remove=function(){this.caches.clearSelfAndDescendantCache("stage"),this.caches.clearSelfAndDescendantCache(g),this.caches.clearSelfAndDescendantCache(P),this.caches.clearSelfAndDescendantCache(m),this.caches.clearSelfAndDescendantCache(d);var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t.setChildrenIndices(),this.parent=null)},k.prototype.__getAbsoluteScale=function(t){for(var e=this;e;)e.isUnderCache&&(t=e),e=e.getParent();var n=1,i=1;return this.__eachAncestorReverse(function(t){n*=t.scaleX,i*=t.scaleY},t),{x:n,y:i}},k.prototype.__isListening=function(){var t=this.listening,e=this.getParent();return"inherit"===t?!e||e.isListening():t},k.prototype.__setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this.caches.clearCache(S),this.caches.clearSelfAndDescendantCache(g)},k.prototype.__clearTransform=function(){var t={x:this.x,y:this.y,rotation:this.rotation,scaleX:this.scaleX,scaleY:this.scaleY,offsetX:this.offsetX,offsetY:this.offsetY,skewX:this.skewX,skewY:this.skewY};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this.caches.clearCache(S),this.caches.clearSelfAndDescendantCache(g),t},k.prototype.__eachAncestorReverse=function(t,e){var n,i,r=[],o=this.getParent();if(e&&e.uid===this.uid)t(this);else{for(r.unshift(this);o&&(!e||o.uid!==e.uid);)r.unshift(o),o=o.parent;for(n=r.length,i=0;i<n;i++)t(r[i])}},k.prototype.__getStage=function(){var t=this.getParent();return t?t.getStage():void 0},k.prototype.__listenDrag=function(){this.__dragCleanup(),this.on("mousedown.__event touchstart.__event",function(t){var n=this;if((void 0===t.evt.button||0<=_.default.dragButtons.indexOf(t.evt.button))&&!this.isDragging()){var i=!1;s.default.dragElements.forEach(function(t,e){n.isAncestorOf(e.node)&&(i=!0)}),i||this.__createDragElement(t)}})},k.prototype.__fire=function(t,e){(e=e||{}).target=e.target||this;var n,i=this.eventListeners[t];if(i)for(e.currentTarget=this,e.type=t,n=0;n<i.length;n++)i[n].handler.call(this,e)},k);function k(t){var e=o.call(this,t)||this;return e._lastPos=null,e.eventListeners={},e.index=0,e.parent=null,e.children=new Array,e.isUnderCache=!1,e.updatedAfterInjection=!1,t=t||{},e.nodeType="Node",e._zIndex=null==t.zIndex?0:t.zIndex,e._preventDefault=null==t.preventDefault||t.preventDefault,e._draggable=null!=t.draggable&&t.draggable,e._dragDistance=null==t.dragDistance?0:t.dragDistance,e._dragBoundFunc=null==t.dragBoundFunc?0:t.dragBoundFunc,e._injectors=[],e.setAttrs(t),e.caches=new p.NodeCaches(e),e.on(C,function(){e.caches.clearCache(S),e.caches.clearSelfAndDescendantCache(g)}),e.on(E,function(){e.caches.clearSelfAndDescendantCache(v)}),e.on("visibleChange.__event",function(){e.caches.clearSelfAndDescendantCache(P)}),e.on("listeningChange.__event",function(){e.caches.clearSelfAndDescendantCache(m)}),e.on("opacityChange.__event",function(){e.caches.clearSelfAndDescendantCache(d)}),e._draggable&&e.__dragChange(),e}e.Node=A},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(28),s=n(41),l=(o=a.Canvas,r(h,o),h);function h(t){var e=o.call(this,t)||this,n=null==(t=t||{}).width?0:t.width,i=null==t.height?0:t.height,r=e.canvasElement.getContext("2d");return r&&(e.contextWrapper=new s.SceneContextWrapper(r,n,i,e.pixelRatio)),e.setSize(n,i),e}e.SceneCanvas=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),o=n(4),r=n(2),a=(s.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!o.isUndefined(e))return e.value},s.prototype.setValue=function(t,e){if(!o.isUndefined(t)&&!o.isUndefined(e)){var n,i="$"+this.toStr(t),r=this.table[i];return n=o.isUndefined(r)?void this.nElements++:r.value,this.table[i]={key:t,value:e},n}},s.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!o.isUndefined(n))return delete this.table[e],this.nElements--,n.value},s.prototype.keys=function(){var t=[];for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];t.push(n.key)}return t},s.prototype.values=function(){var t=[];for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];t.push(n.value)}return t},s.prototype.forEach=function(t){for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];if(!1===t(n.key,n.value))return}},s.prototype.containsKey=function(t){return!o.isUndefined(this.getValue(t))},s.prototype.clear=function(){this.table={},this.nElements=0},s.prototype.size=function(){return this.nElements},s.prototype.isEmpty=function(){return this.nElements<=0},s.prototype.toString=function(){var n="{";return this.forEach(function(t,e){n+="\n\t"+t+" : "+e}),n+"\n}"},s);function s(t){this.table={},this.nElements=0,this.toStr=t||i.defaultToString}e.Dictionary=a},function(t,i,e){"use strict";(function(t){function e(){this._global=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},this._parse()}Object.defineProperty(i,"__esModule",{value:!0});var n=new(e.prototype._parse=function(){var t=this._global.navigator&&this._global.navigator.userAgent||"",e=this._global.navigator&&this._global.navigator.platform.toLowerCase()||"",n=t.toLowerCase(),i=/(chrome)[ /]([\w.]+)/.exec(n)||/(webkit)[ /]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];this.name=i[1]||"",this.version=i[2]||"0",this.platform=n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||["other"])[0],this.isMobile=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),this.isIE=!!this._detectIE(t),this.isIEMobile=!!t.match(/IEMobile/i)},e.prototype._detectIE=function(t){var e=t.toLowerCase(),n=e.indexOf("msie ");if(0<n)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(0<e.indexOf("trident/")){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("edge/");return 0<r&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},e);i.default=n}).call(this,e(21))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(5),r=n(14);function o(){this._justDragged=!1,this._dragElements=new r.Dictionary}var s=new(Object.defineProperty(o.prototype,"dragElements",{get:function(){return this._dragElements},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"justDragged",{get:function(){return this._justDragged},set:function(t){this._justDragged=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDragging",{get:function(){var n=!1;return this._dragElements.forEach(function(t,e){"dragging"===e.dragStatus&&(n=!0)}),n},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"node",{get:function(){var n;return this._dragElements.forEach(function(t,e){n=e.node}),n},enumerable:!0,configurable:!0}),o.prototype.drag=function(a){var s=this;this._dragElements.forEach(function(t,e){var n=e.node,i=n.getStage();i.events.setPointersPositions(a),void 0===e.pointerId&&(e.pointerId=s.__getFirstPointerId(a));var r=i.changedPointerPositions.find(function(t){return t.id===e.pointerId});if(r){if("dragging"!==e.dragStatus){var o=n.dragDistance;if(Math.max(Math.abs(r.x-e.startPointerPos.x),Math.abs(r.y-e.startPointerPos.y))<o)return;if(n.startDrag({evt:a}),!n.isDragging())return}n.setDragPosition(a,e),n.fire("dragmove",{type:"dragmove",target:n,evt:a},!0)}})},o.prototype.endDragBefore=function(r){var o=this;this._dragElements.forEach(function(t,e){var n=e.node.getStage();if(r&&n.events.setPointersPositions(r),n.changedPointerPositions.find(function(t){return t.id===e.pointerId})){"dragging"===e.dragStatus&&(o._justDragged=!0,a.default.listenClickTap=!1,e.dragStatus="stopped");var i=e.node.getLayer()||"Stage"==e.node.nodeType&&e.node;i&&i.draw()}})},o.prototype.endDragAfter=function(n){var i=this;this._dragElements.forEach(function(t,e){"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:n},!0),"dragging"!==e.dragStatus&&i._dragElements.remove(t)})},o.prototype.__getFirstPointerId=function(t){return t.touches?t.changedTouches[0].identifier:999},o);i.default.isBrowser&&(i.default.getGlobal().addEventListener("mouseup",function(t){s.endDragBefore(t),s.endDragAfter(t)},!0),i.default.getGlobal().addEventListener("touchend",function(t){s.endDragBefore(t),s.endDragAfter(t)},!0),i.default.getGlobal().addEventListener("mousemove",function(t){s.drag(t)}),i.default.getGlobal().addEventListener("touchmove",function(t){s.drag(t)})),e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(20),s=(o=a.Container,r(l,o),l.prototype.validateAdd=function(t){var e=t.getType();if("Group"!==e&&"Shape"!==e)throw new Error("You may only add groups and shapes to groups.")},l);function l(t){var e=o.call(this,t)||this;return e.nodeType="Group",e}e.Group=s},,function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(12),s=n(17),l=n(3),h=n(5),c=(o=a.Node,r(u,o),Object.defineProperty(u.prototype,"children",{get:function(){return this._children},set:function(t){this._children=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clip",{get:function(){return{x:this._clipX,y:this._clipY,width:this._clipWidth,height:this._clipHeight}},set:function(t){this._clipX=t.x,this._clipY=t.y,this._clipWidth=t.width,this._clipHeight=t.height,this.setAttr("clipX",this._clipX),this.setAttr("clipY",this._clipY),this.setAttr("clipWidth",this._clipWidth),this.setAttr("clipHeight",this._clipHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clipX",{get:function(){return this._clipX},set:function(t){this._clipX=t,this.setAttr("clipX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clipY",{get:function(){return this._clipY},set:function(t){this._clipY=t,this.setAttr("clipY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clipWidth",{get:function(){return this._clipWidth},set:function(t){this._clipWidth=t,this.setAttr("clipWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clipHeight",{get:function(){return this._clipHeight},set:function(t){this._clipHeight=t,this.setAttr("clipHeight",t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"clipFunc",{get:function(){return this._clipFunc},set:function(t){this._clipFunc=t},enumerable:!0,configurable:!0}),u.prototype.getChildren=function(e){if(!e)return this._children;var n=new Array;return this._children.forEach(function(t){e(t)&&n.push(t)}),n},u.prototype.hasChildren=function(){return 0<this.getChildren().length},u.prototype.removeChildren=function(){for(var t,e=0;e<this._children.length;e++)(t=this._children[e]).parent=null,t.index=0,t.remove();return this._children=new Array,this},u.prototype.add=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t.getParent())return t.moveTo(this),this;var n=this._children;return this.validateAdd(t),t.index=n.length,t.parent=this,n.push(t),this.fire("add",{child:t}),this},u.prototype.destroy=function(){return this.hasChildren()&&this.__destroyChildren(),o.prototype.destroy.call(this),this},u.prototype.find=function(t){return this.__generalFind(t,!1)},u.prototype.findOne=function(t){var e=this.__generalFind(t,!0);return 0<e.length?e[0]:void 0},u.prototype.get=function(t){return l.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},u.prototype.toObject=function(){var t=o.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;i<n;i++){var r=e[i];t.children.push(r.toObject())}return t},u.prototype.getDescendants=function(t){for(var e=[],n=t.length,i=0;i<n;i++){var r=t[i];this.isAncestorOf(r)&&e.push(r)}return e},u.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e.uid===this.uid)return!0;e=e.getParent()}return!1},u.prototype.clone=function(t){var e=o.prototype.clone.call(this,t);return this.getChildren().forEach(function(t){e.add(t.clone())}),e},u.prototype.getAllIntersections=function(e){var n=[];return this.find("Shape").forEach(function(t){t.isVisible()&&t.intersects(e)&&n.push(t)}),n},u.prototype.setChildrenIndices=function(){this._children.forEach(function(t,e){t.index=e})},u.prototype.drawScene=function(t,e,n){var i=this.getLayer(),r=t||i&&i.canvas,o=r&&r.contextWrapper,a=this.caches.getCanvasCache(),s=a&&a.scene;return(this.isVisible()||n)&&(!n&&s?(o.save(),i.applyTransform(this,o,e),this.caches.drawCachedSceneCanvas(o),o.restore()):this._drawChildren(r,"drawScene",e,!1,n,n)),this},u.prototype.drawHit=function(t,e,n){var i=this.getLayer(),r=t||i&&i.hitCanvas,o=r&&r.contextWrapper,a=this.caches.getCanvasCache(),s=a&&a.hit;return(this.shouldDrawHit(r)||n)&&(!n&&s?(o.save(),i.applyTransform(this,o,e),this.caches.drawCachedHitCanvas(o),o.restore()):this._drawChildren(r,"drawHit",e,!1,n,n)),this},u.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var n=this.getLayer(),i=!1;s.default.dragElements.forEach(function(t,e){"dragging"===e.dragStatus&&e.node.getLayer()===n&&(i=!0)});var e=!h.default.hitOnDragEnabled&&i;return n&&n.hitGraphEnabled&&this.isVisible()&&!e},u.prototype.getClientRect=function(n){var i,r,o,a,t=(n=n||{}).skipTransform,e=n.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this._children.forEach(function(t){if(t.visible){var e=t.getClientRect({relativeTo:l,skipShadow:n.skipShadow,skipStroke:n.skipStroke});0===e.width&&0===e.height||(a=void 0===i?(i=e.x,r=e.y,o=e.x+e.width,e.y+e.height):(i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x+e.width),Math.max(a,e.y+e.height)))}});for(var h=this.find("Shape"),c=!1,u=0;u<h.length;u++)if(h[u]._isVisible(this)){c=!0;break}return s=c?{x:i,y:r,width:o-i,height:a-r}:{x:0,y:0,width:0,height:0},t?s:this.transformedRect(s,e)},u.prototype.__destroyChildren=function(){for(var t,e=0;e<this._children.length;e++)(t=this._children[e]).parent=null,t.index=0,t.destroy();return this._children=new Array,this},u.prototype._descendants=function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}return!1},u.prototype.__generalFind=function(n,i){var r=[];return this._descendants(function(t){var e=t.isMatch(n);return e&&r.push(t),!(!e||!i)}),r},u.prototype._drawChildren=function(e,n,i,r,o,t){var a,s,l=this.getLayer(),h=e&&e.contextWrapper,c=this._clipWidth,u=this._clipHeight,f=this._clipFunc,p=c&&u||f;if(p&&l){h.save();var d=this.getAbsoluteTransform(i),g=d.getMatrix();h.transform(g[0],g[1],g[2],g[3],g[4],g[5]),h.beginPath(),f?f.call(this,h,this):(a=this._clipX,s=this._clipY,h.rect(a,s,c,u)),h.clip(),g=d.copy().invert().getMatrix(),h.transform(g[0],g[1],g[2],g[3],g[4],g[5])}var _="source-over"!==this.globalCompositeOperation&&!t;_&&l&&(h.save(),h.applyGlobalCompositeOperation(this)),this._children.forEach(function(t){t[n](e,i,r,o)}),_&&l&&h.restore(),p&&l&&h.restore()},u);function u(t){var e=o.call(this,t)||this;return t=t||{},e._children=new Array,null!=t.clip?(e._clipX=null==t.clip.clipX?0:t.clip.clipX,e._clipY=null==t.clip.clipY?0:t.clip.clipY,e._clipWidth=null==t.clip.clipWidth?0:t.clip.clipWidth,e._clipHeight=null==t.clip.clipHeight?0:t.clip.clipHeight):(e._clipX=null==t.clipX?0:t.clipX,e._clipY=null==t.clipY?0:t.clipY,e._clipWidth=null==t.clipWidth?0:t.clipWidth,e._clipHeight=null==t.clipX?0:t.clipHeight),e._clipFunc=null==t.clipFunc?null:t.clipFunc,e}e.Container=c},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(28),s=n(44),l=(o=a.Canvas,r(h,o),h);function h(t){var e=o.call(this,t)||this,n=null==(t=t||{}).width?0:t.width,i=null==t.height?0:t.height;e.hitCanvas=!0;var r=e.canvasElement.getContext("2d");return r&&(e.contextWrapper=new s.HitContextWrapper(r,n,i,e.pixelRatio)),e.setSize(n,i),e}e.HitCanvas=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=new(n(14).Dictionary);function a(t){return{evt:t,pointerId:t.pointerId}}function i(t,e){var n=o.getValue(t);if(n){var i=n.getStage();i&&i.content,o.remove(t),r.default.supportPointerEvents&&n.fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return o.getValue(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return o.getValue(t)===e},e.setPointerCapture=function(t,e){i(t),e.getStage()&&(o.setValue(t,e),r.default.supportPointerEvents&&e.fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(1),i=(r.prototype.setLayers=function(t){var e=[];return e=t?0<t.length?t:[t]:[],this.layers=e,this},r.prototype.getLayers=function(){return this.layers},r.prototype.addLayer=function(t){var e,n=this.layers,i=n.length;for(e=0;e<i;e++)if(n[e].uid===t.uid)return!1;return this.layers.push(t),!0},r.prototype.isRunning=function(){var t,e=r.animations,n=e.length;for(t=0;t<n;t++)if(e[t].id===this.id)return!0;return!1},r.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=c.default.now(),r._addAnimation(this),this},r.prototype.stop=function(){return r._removeAnimation(this),this},r.prototype.updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},r._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},r._removeAnimation=function(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;e<r;e++)if(i[e].id===n){this.animations.splice(e,1);break}},r._runFrames=function(){var t,e,n,i,r,o,a,s,l={},h=this.animations;for(i=0;i<h.length;i++)if(e=(t=h[i]).layers,n=t.func,t.updateFrameObject(c.default.now()),o=e.length,!n||!1!==n.call(t,t.frame))for(r=0;r<o;r++)void 0!==(a=e[r]).uid&&(l[a.uid]=a);for(s in l)l.hasOwnProperty(s)&&l[s].draw()},r._animationLoop=function(){var t=r;t.animations.length?(t._runFrames(),c.default.requestAnimationFrame(t._animationLoop)):t.animRunning=!1},r._handleAnimation=function(){this.animRunning||(this.animRunning=!0,c.default.requestAnimationFrame(this._animationLoop))},r.animations=[],r.animIdCounter=0,r.animRunning=!1,r);function r(t,e){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:c.default.now(),frameRate:0},this.func=t,this.setLayers(e)}e.Animation=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(h,o),Object.defineProperty(h.prototype,"points",{get:function(){return this._points},set:function(t){this._points=t,this.setAttr("points",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"closed",{get:function(){return this._closed},set:function(t){this._closed=t,this.setAttr("closed",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"bezier",{get:function(){return this._bezier},set:function(t){this._bezier=t,this.setAttr("bezier",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tension",{get:function(){return this._tension},set:function(t){this._tension=t,this.setAttr("tension",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this.getSelfRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this.getSelfRect().height},enumerable:!0,configurable:!0}),h.prototype.sceneRender=function(t){var e,n,i,r=this._points,o=r.length,a=this._tension,s=this._closed,l=this._bezier;if(o){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==a&&4<o){for(n=(e=this.getTensionPoints()).length,i=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);s||t.quadraticCurveTo(e[n-2],e[n-1],r[o-2],r[o-1])}else if(l)for(i=2;i<o;)t.bezierCurveTo(r[i++],r[i++],r[i++],r[i++],r[i++],r[i++]);else for(i=2;i<o;i+=2)t.lineTo(r[i],r[i+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},h.prototype.getTensionPoints=function(){return this.caches.getCache("tensionPoints",this._getTensionPoints)},h.prototype._getTensionPoints=function(){return this._closed?this._getTensionPointsClosed():this._expandPoints(this._points,this._tension)},h.prototype._getTensionPointsClosed=function(){var t=this._points,e=t.length,n=this._tension,i=this._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=this._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=this._expandPoints(t,n);return[i[2],i[3]].concat(o).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],i[0],i[1],t[0],t[1]])},h.prototype.getSelfRect=function(){var t=this._points;if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,i=(t=0!==this._tension?l([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-2]]):this._points)[0],r=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),a=Math.max(a,n);return{x:Math.round(i),y:Math.round(o),width:Math.round(r-i),height:Math.round(a-o)}},h.prototype._getControlPoints=function(t,e,n,i,r,o,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2)),h=a*s/(s+l),c=a*l/(s+l);return[n-h*(r-t),i-h*(o-e),n+c*(r-t),i+c*(o-e)]},h.prototype._expandPoints=function(t,e){var n,i,r=t.length,o=[];for(n=2;n<r-2;n+=2)i=this._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),o.push(i[0]),o.push(i[1]),o.push(t[n]),o.push(t[n+1]),o.push(i[2]),o.push(i[3]);return o},h);function h(t){var e=o.call(this,t)||this;t=t||{},e.centroid=!1,e.className="Line";var n=e;return n._points=null==t.points?[]:t.points,n._closed=null!=t.closed&&t.closed,n._bezier=null!=t.bezier&&t.bezier,n._tension=null==t.tension?0:t.tension,e.on("pointsChange.__event tensionChange.__event closedChange.__event bezierChange.__event",function(){n.caches.clearCache("tensionPoints")}),e}e.Line=s},,function(t,n,e){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e(20),a=e(13),s=e(22),l=e(10),h=e(45),c=e(23),u=e(1),f=e(5),p=e(3);function d(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&p.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}n.stages=[];var g,_=(g=o.Container,r(y,g),Object.defineProperty(y.prototype,"container",{get:function(){return this._containerDom},set:function(t){this.__setContainer(t)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"bufferCanvas",{get:function(){return this._bufferCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"bufferHitCanvas",{get:function(){return this._bufferHitCanvas},enumerable:!0,configurable:!0}),y.prototype.getStage=function(){return this},y.prototype.getParent=function(){return null},y.prototype.getLayer=function(){return null},y.prototype.getLayers=function(){return this.getChildren()},y.prototype.validateAdd=function(t){if(!(t instanceof l.BaseLayer))throw new Error("You may only add layers to the stage.")},y.prototype.shouldDrawHit=function(){return!0},y.prototype.clear=function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},y.prototype.clone=function(t){return t=t||{},u.default.isBrowser&&(t.container=u.default.getGlobal().document.createElement("div")),g.prototype.clone.call(this,t)},y.prototype.destroy=function(){g.prototype.destroy.call(this);var t=this._content;t&&this.__isInDocument(t)&&this._containerDom&&this._containerDom.removeChild(t);var e=n.stages.indexOf(this);return-1<e&&n.stages.splice(e,1),this},y.prototype.getIntersection=function(t,e){if(!t)return null;var n,i,r=this.children;for(n=r.length-1;0<=n;n--)if(i=r[n].getIntersection(t,e))return i;return null},y.prototype.add=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(!(this._singleCanvas&&1<=this.children.length))return g.prototype.add.call(this,t),this.children.length>=f.default.maxLayerNumber&&p.warn("The stage has "+this.children.length+" layers. Recommended maximin number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Group."),t.setCanvasSize(this.width,this.height),t.draw(),u.default.isBrowser&&this._content.appendChild(t.canvas.canvasElement),this;p.error("The stage is single canvas mode.")},y.prototype.cache=function(){return p.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},y.prototype.clearCache=function(){return this},y.prototype.batchDraw=function(){return this.children.forEach(function(t){t.batchDraw()}),this},y.prototype.getPointerById=function(e){return this.pointerPositions.find(function(t){return t.id===e})},y.prototype.getPointerPosition=function(){var t=this.pointerPositions[0]||this.changedPointerPositions[0];return t?{x:t.x,y:t.y}:(p.warn("Pointer position is missing and not registered by the stage. \n                Looks like it is outside of the stage container.\n                 You can set it manually from event: stage.events.setPointersPositions(event);"),null)},y.prototype.getPointersPositions=function(){return this.pointerPositions},y.prototype.getContentPosition=function(){if(this._content){var t=this._content.getBoundingClientRect?this._content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}}return{top:0,left:0}},y.prototype.toCanvas=function(n){var i=(n=n||{}).x||0,r=n.y||0,t=new a.SceneCanvas({width:n.width||this.width,height:n.height||this.height,pixelRatio:n.pixelRatio||1}),o=t.contextWrapper.context,e=this.children;return(i||r)&&o.translate(-1*i,-1*r),e.forEach(function(t){if(t.isVisible()){var e=t.toCanvas(n);o.drawImage(e.canvasElement,i,r,e.width/e.pixelRatio,e.height/e.pixelRatio)}}),t},y.prototype.hasPointerCapture=function(t){return c.hasPointerCapture(t,this)},y.prototype.setPointerCapture=function(t){c.setPointerCapture(t,this)},y.prototype.releaseCapture=function(t){c.releaseCapture(t,this)},y.prototype.__initBuffer=function(){this._bufferCanvas=new a.SceneCanvas,this._bufferHitCanvas=new s.HitCanvas({pixelRatio:1})},y.prototype.__setContainer=function(t){if("string"==typeof t)if("."===t.charAt(0)){var e=t.slice(1);this._containerDom=u.default.getGlobal().document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),this._containerDom=u.default.getGlobal().document.getElementById(n)}else this._containerDom=t;if(!this._containerDom)throw"Can not find container in document with id "+n;this.setAttr("container",this._containerDom),this._content&&(this._content.parentElement&&this._content.parentElement.removeChild(this._content),this._containerDom.appendChild(this._content))},y.prototype.__buildDOM=function(){if(!this._containerDom)throw"Stage has no container. A container is required.";this._containerDom.innerHTML="",this._content=u.default.getGlobal().document.createElement("div"),this._content.style.position="relative",this._content.style.userSelect="none",this._content.className="stage-content",this._content.setAttribute("role","presentation"),this._containerDom.appendChild(this._content)},y.prototype.__resize=function(){var t,e,n=this.width,i=this.height,r=this.getChildren(),o=r.length;for(this._content&&(this._content.style.width=n+"px",this._content.style.height=i+"px"),this.bufferCanvas&&this.bufferCanvas.setSize(this.width,this.height),this.bufferHitCanvas&&this.bufferHitCanvas.setSize(this.width,this.height),t=0;t<o;t++)(e=r[t]).size={width:n,heigt:i},e.draw()},y.prototype.__isInDocument=function(t){if(!u.default.isBrowser)return!1;for(;t=t.parentNode;)if(t==u.default.getGlobal().document)return!0;return!1},y.prototype.__checkVisibility=function(){if(this._content){var t=this.visible?"":"none";this._content.style.display=t}},y);function y(t){var e=g.call(this,d(t))||this;return e.changedPointerPositions=[],e.pointerPositions=[],t=t||{},e.nodeType="Stage",e._singleCanvas=!1,u.default.isWx&&(e._singleCanvas=!0),u.default.enableBuffer&&e.__initBuffer(),u.default.isBrowser&&null!=t.container&&(e.__setContainer(t.container),e.__buildDOM()),e.on("widthChange.__event heightChange.__event",e.__resize),e.__resize(),e.on("visibleChange.__event",e.__checkVisibility),e.__checkVisibility(),e.on("clipWidthChange.__event clipHeightChange.__event clipFuncChange.__event",function(){d(e.attrs)}),e._events=new h.StageEvents(e),u.default.isBrowser&&e._events.bindContentEvents(),n.stages.push(e),e}n.Stage=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3),o=n(5),a=(Object.defineProperty(s.prototype,"pixelRatio",{get:function(){return this._pixelRatio},set:function(t){var e=this._pixelRatio;this._pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hitCanvas",{get:function(){return this._hitCanvas},set:function(t){this._hitCanvas=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isCache",{get:function(){return this._isCache},set:function(t){this._isCache=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"contextWrapper",{get:function(){return this._contextWrapper},set:function(t){this._contextWrapper=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canvasElement",{get:function(){return this._canvasElement},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.setSize=function(t,e){var n;this._contextWrapper&&this._contextWrapper.context&&(n=this._contextWrapper.context.globalCompositeOperation),this.__setWidth(t),this.__setHeight(e),this._contextWrapper&&this._contextWrapper.context&&(this._contextWrapper.context.globalCompositeOperation=n)},s.prototype.toDataURL=function(t,e){try{return this._canvasElement.toDataURL(t,e)}catch(t){try{return this._canvasElement.toDataURL()}catch(t){return r.error("Unable to get data URL. "+t.message),""}}},s.prototype.__setWidth=function(t){if(this._width=t*this.pixelRatio,this._contextWrapper&&(this._contextWrapper.canvasWidth=t*this.pixelRatio),this._canvasElement.width=t*this.pixelRatio,this._canvasElement.style.width=t+"px",this._contextWrapper&&this._contextWrapper.context){var e=this.pixelRatio;this.contextWrapper.context.scale(e,e)}},s.prototype.__setHeight=function(t){if(this._height=t*this.pixelRatio,this._contextWrapper&&(this._contextWrapper.canvasHeight=t*this.pixelRatio),this._canvasElement.height=t*this.pixelRatio,this._canvasElement.style.height=t+"px",this._contextWrapper&&this._contextWrapper.context){var e=this.pixelRatio;this.contextWrapper.context.scale(e,e)}},s);function s(t){t=t||{},this._pixelRatio=t.pixelRatio||o.default.pixelRatio||i.default.getDevicePixelRatio(),this._offScreen=null==t.offScreen,this._isCache=!1,this._hitCanvas=!1,this._width=0,this._height=0,this._offScreen?this._canvasElement=i.default.createOffScreenCanvasElement():this._canvasElement=null==t.canvasElement?i.default.createCanvasElement():t.canvasElement;try{this._canvasElement.style=this._canvasElement.style||{}}catch(t){}this._canvasElement.style.padding="0",this._canvasElement.style.margin="0",this._canvasElement.style.border="0",this._canvasElement.style.background="transparent",this._canvasElement.style.position="absolute",this._canvasElement.style.top="0",this._canvasElement.style.left="0"}e.Canvas=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canvasWidth",{get:function(){return this._canvasWidth},set:function(t){this._canvasWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canvasHeight",{get:function(){return this._canvasHeight},set:function(t){this._canvasHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canvasPixelRatio",{get:function(){return this._canvasPixelRatio},set:function(t){this._canvasWidth=t},enumerable:!0,configurable:!0}),r.prototype.fillShape=function(t){t.fillEnabled&&this.fillShapeImpl(t)},r.prototype.strokeShape=function(t){t.strokeEnabled&&this.strokeShapeImpl(t)},r.prototype.fillStrokeShape=function(t){t.fillEnabled&&this.fillShapeImpl(t),t.strokeEnabled&&this.strokeShapeImpl(t)},r.prototype.clear=function(t){t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,this.canvasWidth/this.canvasPixelRatio,this.canvasHeight/this.canvasPixelRatio)},r.prototype.reset=function(){var t=this.canvasPixelRatio;this.setTransform(1*t,0,0,1*t,0,0)},r.prototype.applyLineCap=function(t){var e=t.lineCap;e&&(this.lineCap=e)},r.prototype.applyLineJoin=function(t){var e=t.lineJoin;e&&(this.lineJoin=e)},r.prototype.applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&(this.globalAlpha=e)},r.prototype.applyGlobalCompositeOperation=function(t){var e=t.globalCompositeOperation;"source-over"!==e&&(this.globalCompositeOperation=e)},Object.defineProperty(r.prototype,"fillStyle",{get:function(){return this._context.fillStyle},set:function(t){this._context.fillStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"strokeStyle",{get:function(){return this._context.strokeStyle},set:function(t){this._context.strokeStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"shadowColor",{get:function(){return this._context.shadowColor},set:function(t){this._context.shadowColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"shadowBlur",{get:function(){return this._context.shadowBlur},set:function(t){this._context.shadowBlur=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"shadowOffsetX",{get:function(){return this._context.shadowOffsetX},set:function(t){this._context.shadowOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"shadowOffsetY",{get:function(){return this._context.shadowOffsetY},set:function(t){this._context.shadowOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineCap",{get:function(){return this._context.lineCap},set:function(t){this._context.lineCap=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineDashOffset",{get:function(){return this._context.lineDashOffset},set:function(t){this._context.lineDashOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._context.lineJoin},set:function(t){this._context.lineJoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineWidth",{get:function(){return this._context.lineWidth},set:function(t){this._context.lineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._context.miterLimit},set:function(t){this._context.miterLimit=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"font",{get:function(){return this._context.font},set:function(t){this._context.font=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textAlign",{get:function(){return this._context.textAlign},set:function(t){this._context.textAlign=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._context.textBaseline},set:function(t){this._context.textBaseline=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"globalAlpha",{get:function(){return this._context.globalAlpha},set:function(t){this._context.globalAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"globalCompositeOperation",{get:function(){return this._context.globalCompositeOperation},set:function(t){this._context.globalCompositeOperation=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageSmoothingEnabled",{get:function(){return this._context.imageSmoothingEnabled},set:function(t){this._context.imageSmoothingEnabled=t},enumerable:!0,configurable:!0}),r.prototype.arc=function(t,e,n,i,r,o){this._context.arc(t,e,n,i,r,o)},r.prototype.arcTo=function(t,e,n,i,r){this._context.arcTo(t,e,n,i,r)},r.prototype.beginPath=function(){this._context.beginPath()},r.prototype.bezierCurveTo=function(t,e,n,i,r,o){this._context.bezierCurveTo(t,e,n,i,r,o)},r.prototype.clearRect=function(t,e,n,i){this._context.clearRect(t,e,n,i)},r.prototype.clip=function(){this._context.clip()},r.prototype.closePath=function(){this._context.closePath()},r.prototype.createImageData=function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0},r.prototype.createLinearGradient=function(t,e,n,i){return this._context.createLinearGradient(t,e,n,i)},r.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},r.prototype.createRadialGradient=function(t,e,n,i,r,o){return this._context.createRadialGradient(t,e,n,i,r,o)},r.prototype.drawImage=function(t,e,n,i,r,o,a,s,l){var h=arguments,c=this._context;3===h.length?c.drawImage(t,e,n):5===h.length?c.drawImage(t,e,n,i,r):9===h.length&&c.drawImage(t,e,n,i,r,o,a,s,l)},r.prototype.ellipse=function(t,e,n,i,r,o,a,s){this._context.ellipse(t,e,n,i,r,o,a,s)},r.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},r.prototype.fill=function(){this._context.fill()},r.prototype.fillRect=function(t,e,n,i){this._context.fillRect(t,e,n,i)},r.prototype.strokeRect=function(t,e,n,i){this._context.strokeRect(t,e,n,i)},r.prototype.fillText=function(t,e,n){this._context.fillText(t,e,n)},r.prototype.measureText=function(t){return this._context.measureText(t)},r.prototype.getImageData=function(t,e,n,i){return this._context.getImageData(t,e,n,i)},r.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},r.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},r.prototype.rect=function(t,e,n,i){this._context.rect(t,e,n,i)},r.prototype.putImageData=function(t,e,n,i,r,o,a){var s=arguments;3===s.length?this._context.putImageData(t,e,n):7===s.length&&this._context.putImageData(t,e,n,i,r,o,a)},r.prototype.quadraticCurveTo=function(t,e,n,i){this._context.quadraticCurveTo(t,e,n,i)},r.prototype.restore=function(){this._context.restore()},r.prototype.rotate=function(t){this._context.rotate(t)},r.prototype.save=function(){this._context.save()},r.prototype.scale=function(t,e){this._context.scale(t,e)},r.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},r.prototype.getLineDash=function(){return this._context.getLineDash()},r.prototype.setTransform=function(t,e,n,i,r,o){this._context.setTransform(t,e,n,i,r,o)},r.prototype.stroke=function(){this._context.stroke()},r.prototype.strokeText=function(t,e,n,i){this._context.strokeText(t,e,n,i)},r.prototype.transform=function(t,e,n,i,r,o){this._context.transform(t,e,n,i,r,o)},r.prototype.translate=function(t,e){this._context.translate(t,e)},r);function r(t,e,n,i){this._context=t,this._canvasWidth=e,this._canvasHeight=n,this._canvasPixelRatio=i}e.ContextWrapper=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);function r(t){for(var e=0;e<t.length&&" "==t.charAt(e);e++);return t.slice(e,t.length)}function o(t){for(var e=t.length-1;0<=e&&" "==t.charAt(e);e--);return t.slice(0,e+1)}e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.LTrim=r,e.RTrim=o,e.Trim=function(t){return r(o(t))},e.defaultToString=function(t){return null===t?"COLLECTION_NULL":i.isUndefined(t)?"COLLECTION_UNDEFINED":i.isString(t)?"$s"+t:"$o"+t.toString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.simplifyArray=function(t){var e,n,i=[],r=t.length;for(e=0;e<r;e++)n=t[e],o.isNumber(n)?n=Math.round(1e3*n)/1e3:o.isString(n)||(n=n.toString()),i.push(n);return i},e.cloneArray=function(t){return t.slice(0)},e.arrayToString=function(t){return"["+t.toString()+"]"},e.destroyArray=function(t){t&&(t.length=0)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Easings={BackEaseIn:function(t,e,n,i){return n*(t/=i)*t*(2.70158*t-1.70158)+e},BackEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*(2.70158*t+1.70158)+1)+e},BackEaseInOut:function(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn:function(t,e,n,i,r,o){var a=0;return 0===t?e:1==(t/=i)?e+n:(o=o||.3*i,a=!r||r<Math.abs(n)?(r=n,o/4):o/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,n,i,r,o){var a=0;return 0===t?e:1==(t/=i)?e+n:(o=o||.3*i,a=!r||r<Math.abs(n)?(r=n,o/4):o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,i,r,o){var a=0;return 0===t?e:2==(t/=i/2)?e+n:(o=o||i*(.3*1.5),a=!r||r<Math.abs(n)?(r=n,o/4):o/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-r.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return t<i/2?.5*r.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*r.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(52);e.Arc=i.Arc;var r=n(53);e.Arrow=r.Arrow;var o=n(54);e.Circle=o.Circle;var a=n(55);e.Ellipse=a.Ellipse;var s=n(56);e.Image=s.Image;var l=n(57);e.Label=l.Label;var h=n(25);e.Line=h.Line;var c=n(58);e.Path=c.Path;var u=n(59);e.Polygon=u.Polygon;var f=n(36);e.Rect=f.Rect;var p=n(60);e.RegularPolygon=p.RegularPolygon;var d=n(61);e.Ring=d.Ring;var g=n(62);e.Sector=g.Sector;var _=n(63);e.Sprite=_.Sprite;var y=n(64);e.Star=y.Star;var b=n(65);e.Tag=b.Tag;var v=n(66);e.Text=v.Text;var m=n(67);e.TextPath=m.TextPath},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(f.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},f.getPointOnLine=function(t,e,n,i,r,o,a){void 0===o&&(o=e),void 0===a&&(a=n);var s=(r-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+s*s));i<e&&(l*=-1);var h,c=s*l;if(i===e)h={x:o,y:a+c};else if((a-n)/(o-e+1e-8)==s)h={x:o+l,y:a+c};else{var u,f,p=this.getLineLength(e,n,i,r);if(p<1e-8)return;var d=(o-e)*(i-e)+(a-n)*(r-n);u=e+(d/=p*p)*(i-e),f=n+d*(r-n);var g=this.getLineLength(o,a,u,f),_=Math.sqrt(t*t-g*g);l=Math.sqrt(_*_/(1+s*s)),i<e&&(l*=-1),h={x:u+l,y:f+(c=s*l)}}return h},f.getPointOnCubicBezier=function(t,e,n,i,r,o,a,s,l){function h(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function f(t){return(1-t)*(1-t)*(1-t)}return{x:s*h(t)+o*c(t)+i*u(t)+e*f(t),y:l*h(t)+a*c(t)+r*u(t)+n*f(t)}},f.getPointOnQuadraticBezier=function(t,e,n,i,r,o,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function h(t){return(1-t)*(1-t)}return{x:o*s(t)+i*l(t)+e*h(t),y:a*s(t)+r*l(t)+n*h(t)}},f.getPointOnEllipticalArc=function(t,e,n,i,r,o){var a=Math.cos(o),s=Math.sin(o),l=n*Math.cos(r),h=i*Math.sin(r);return{x:t+(l*a-h*s),y:e+(l*s+h*a)}},f.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r,o=e.split("|"),a=[],s=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<o.length;i++){var u=o[i],f=u.charAt(0);for(u=u.slice(1),s.length=0;r=c.exec(u);)s.push(r[0]);for(var p=[],d=0,g=s.length;d<g;d++){var _=parseFloat(s[d]);isNaN(_)?p.push(0):p.push(_)}for(;0<p.length&&!isNaN(p[0]);){var y,b,v,m,P,x,w,O,S,C,E=null,A=[],k=l,j=h;switch(f){case"l":l+=p.shift(),h+=p.shift(),E="L",A.push(l,h);break;case"L":l=p.shift(),h=p.shift(),A.push(l,h);break;case"m":var R=p.shift(),T=p.shift();if(l+=R,h+=T,E="M",2<a.length&&"z"===a[a.length-1].command)for(var L=a.length-2;0<=L;L--)if("M"===a[L].command){l=a[L].points[0]+R,h=a[L].points[1]+T;break}A.push(l,h),f="l";break;case"M":l=p.shift(),h=p.shift(),E="M",A.push(l,h),f="L";break;case"h":l+=p.shift(),E="L",A.push(l,h);break;case"H":l=p.shift(),E="L",A.push(l,h);break;case"v":h+=p.shift(),E="L",A.push(l,h);break;case"V":h=p.shift(),E="L",A.push(l,h);break;case"C":A.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),h=p.shift(),A.push(l,h);break;case"c":A.push(l+p.shift(),h+p.shift(),l+p.shift(),h+p.shift()),l+=p.shift(),h+=p.shift(),E="C",A.push(l,h);break;case"S":b=l,v=h,"C"===(y=a[a.length-1]).command&&(b=l+(l-y.points[2]),v=h+(h-y.points[3])),A.push(b,v,p.shift(),p.shift()),l=p.shift(),h=p.shift(),E="C",A.push(l,h);break;case"s":b=l,v=h,"C"===(y=a[a.length-1]).command&&(b=l+(l-y.points[2]),v=h+(h-y.points[3])),A.push(b,v,l+p.shift(),h+p.shift()),l+=p.shift(),h+=p.shift(),E="C",A.push(l,h);break;case"Q":A.push(p.shift(),p.shift()),l=p.shift(),h=p.shift(),A.push(l,h);break;case"q":A.push(l+p.shift(),h+p.shift()),l+=p.shift(),h+=p.shift(),E="Q",A.push(l,h);break;case"T":b=l,v=h,"Q"===(y=a[a.length-1]).command&&(b=l+(l-y.points[0]),v=h+(h-y.points[1])),l=p.shift(),h=p.shift(),E="Q",A.push(b,v,l,h);break;case"t":b=l,v=h,"Q"===(y=a[a.length-1]).command&&(b=l+(l-y.points[0]),v=h+(h-y.points[1])),l+=p.shift(),h+=p.shift(),E="Q",A.push(b,v,l,h);break;case"A":m=p.shift(),P=p.shift(),x=p.shift(),w=p.shift(),O=p.shift(),S=l,C=h,l=p.shift(),h=p.shift(),E="A",A=this.convertEndpointToCenterParameterization(S,C,l,h,w,O,m,P,x);break;case"a":m=p.shift(),P=p.shift(),x=p.shift(),w=p.shift(),O=p.shift(),S=l,C=h,l+=p.shift(),h+=p.shift(),E="A",A=this.convertEndpointToCenterParameterization(S,C,l,h,w,O,m,P,x)}a.push({command:E||f,points:A,start:{x:k,y:j},pathLength:this.calcLength(k,j,E||f,A)})}"z"!==f&&"Z"!==f||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},f.calcLength=function(t,e,n,i){var r,o,a,s;switch(n){case"L":return f.getLineLength(t,e,i[0],i[1]);case"C":for(o=f.getPointOnCubicBezier(r=0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),s=.01;s<=1;s+=.01)a=f.getPointOnCubicBezier(s,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=f.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"Q":for(o=f.getPointOnQuadraticBezier(r=0,t,e,i[0],i[1],i[2],i[3]),s=.01;s<=1;s+=.01)a=f.getPointOnQuadraticBezier(s,t,e,i[0],i[1],i[2],i[3]),r+=f.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"A":r=0;var l=i[4],h=i[5],c=i[4]+h,u=Math.PI/180;if(Math.abs(l-c)<u&&(u=Math.abs(l-c)),o=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),h<0)for(s=l-u;c<s;s-=u)a=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),r+=f.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=l+u;s<c;s+=u)a=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),r+=f.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),r+=f.getLineLength(o.x,o.y,a.x,a.y)}return 0},f.convertEndpointToCenterParameterization=function(t,e,n,i,r,o,a,s,l){var h=l*(Math.PI/180),c=Math.cos(h)*(t-n)/2+Math.sin(h)*(e-i)/2,u=-1*Math.sin(h)*(t-n)/2+Math.cos(h)*(e-i)/2,f=c*c/(a*a)+u*u/(s*s);1<f&&(a*=Math.sqrt(f),s*=Math.sqrt(f));var p=Math.sqrt((a*a*(s*s)-a*a*(u*u)-s*s*(c*c))/(a*a*(u*u)+s*s*(c*c)));function d(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function g(t,e){return(t[0]*e[0]+t[1]*e[1])/(d(t)*d(e))}function _(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(g(t,e))}r===o&&(p*=-1),isNaN(p)&&(p=0);var y=p*a*u/s,b=p*-s*c/a,v=(t+n)/2+Math.cos(h)*y-Math.sin(h)*b,m=(e+i)/2+Math.sin(h)*y+Math.cos(h)*b,P=_([1,0],[(c-y)/a,(u-b)/s]),x=[(c-y)/a,(u-b)/s],w=[(-1*c-y)/a,(-1*u-b)/s],O=_(x,w);return g(x,w)<=-1&&(O=Math.PI),1<=g(x,w)&&(O=0),0===o&&0<O&&(O-=2*Math.PI),1===o&&O<0&&(O+=2*Math.PI),[v,m,a,s,P,O,h,o]},f);function f(){}e.PathTool=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(1);e.default={IMAGE_CACHE:{},loadImage:function(t,e,n){var i=this,r="string"==typeof t?t:t.src;if(this.IMAGE_CACHE[r])e(this.IMAGE_CACHE[r],n);else{var o=l.default.createImageElement();o.onload=function(){i.IMAGE_CACHE[r]=o,e(o,n)},o.src=r}},loadImages:function(t,e,n){var i=this,r={},o=0,a=0;for(var s in t)a++;for(var s in t)this.IMAGE_CACHE[s]?(r[s]=this.IMAGE_CACHE[s],++o>=a&&e(r,n)):(r[s]=l.default.createImageElement(),r[s].onload=function(){i.IMAGE_CACHE[s]=r[s],++o>=a&&e(r,n)},r[s].src=t[s])}}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t,this.setAttr("cornerRadius",t)},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this._cornerRadius,n=this.width,i=this.height;if(t.beginPath(),e){var r=0,o=0,a=0,s=0;"number"==typeof e?r=o=a=s=Math.min(e,n/2,i/2):(r=Math.min(e[0],n/2,i/2),o=Math.min(e[1],n/2,i/2),s=Math.min(e[2],n/2,i/2),a=Math.min(e[3],n/2,i/2)),t.moveTo(r,0),t.lineTo(n-o,0),t.arc(n-o,o,o,3*Math.PI/2,0,!1),t.lineTo(n,i-s),t.arc(n-s,i-s,s,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,i);t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Rect",e._cornerRadius=null==t.cornerRadius?0:t.cornerRadius,e.width=null==t.width?0:t.width,e.height=null==t.height?0:t.height,e}e.Rect=s},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(4),n=0;s.ids={},s.names={};function r(t,e){t&&s.ids[t]===e&&delete s.ids[t]}function l(t,e){if(t){var n=s.names[t];if(n){for(var i=0;i<n.length;i++){n[i].uid===e&&n.splice(i,1)}0===n.length&&delete s.names[t]}}}var o=(Object.defineProperty(a.prototype,"nodeType",{get:function(){return this._nodeType},set:function(t){this._nodeType=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this._id},set:function(t){var e=this._id;r(e,this),this._id=t,function(t,e){e&&(s.ids[e]=t)}(this,t),this.setAttr("id",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this._name},set:function(t){var e,n,i,r,o=(this._name||"").split(/\s/g),a=(t||"").split(/\s/g);for(n=0;n<o.length;n++)e=o[n],-1===a.indexOf(e)&&e&&l(e,this.uid);for(n=0;n<a.length;n++)e=a[n],-1===o.indexOf(e)&&e&&(i=this,(r=e)&&(s.names[r]||(s.names[r]=[]),s.names[r].push(i)));this._name=t,this.setAttr("name",name)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.setAttr("x",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.setAttr("y",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return{x:this.x,y:this.y}},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.setAttr("width",t)},enumerable:!0,configurable:!0}),a.prototype.setWidth=function(t){this._width=t,this.setAttr("width",t)},Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.setAttr("height",t)},enumerable:!0,configurable:!0}),a.prototype.setHeight=function(t){this._height=t,this.setAttr("height",t)},Object.defineProperty(a.prototype,"size",{get:function(){return{width:this.width,height:this.height}},set:function(t){this.width=t.width,this.height=t.height},enumerable:!0,configurable:!0}),a.prototype.getSize=function(){return this.size},a.prototype.setSize=function(t){this.size=t},Object.defineProperty(a.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.setAttr("rotation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offset",{get:function(){return{x:this.offsetX,y:this.offsetY}},set:function(t){this.offsetX=t.x,this.offsetY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offsetX",{get:function(){return this._offsetX},set:function(t){this._offsetX=t,this.setAttr("offsetX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offsetY",{get:function(){return this._offsetY},set:function(t){this._offsetY=t,this.setAttr("offsetY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return{x:this.scaleX,y:this.scaleY}},set:function(t){this.scaleX=t.x,this.scaleY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.setAttr("scaleX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.setAttr("scaleY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skew",{get:function(){return{x:this.skewX,y:this.skewY}},set:function(t){this.skewX=t.x,this.skewY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this._skewX=t,this.setAttr("skewX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this._skewY=t,this.setAttr("skewY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t,this.setAttr("opacity",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.setAttr("visible",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"listening",{get:function(){return this._listening},set:function(t){this._listening=t,this.setAttr("listening",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"globalCompositeOperation",{get:function(){return this._globalCompositeOperation},set:function(t){this._globalCompositeOperation=t,this.setAttr("globalCompositeOperation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"transformsEnabled",{get:function(){return this._transformsEnabled},set:function(t){this._transformsEnabled=t,this.setAttr("transformsEnabled",t)},enumerable:!0,configurable:!0}),a.prototype.getAttrs=function(){return this.attrs||{}},a.prototype.setAttrs=function(t){var e;if(!t)return this;for(e in t)"children"!==e&&this.setAttr(e,t[e]);return this},a.prototype.getAttr=function(t){return this.attrs[t]},a.prototype.setAttr=function(t,e){var n=this.attrs[t];n===e&&!i.isObject(e)||(null==e?delete this.attrs[t]:this.attrs[t]=e,this.fireAttrChange(t,n,e))},a.prototype.getClassName=function(){return this._className||this._nodeType},a.prototype.getType=function(){return this._nodeType},a.prototype.addName=function(t){if(!this.hasName(t)){var e=this._name,n=e?e+" "+t:t;this.name=n}return this},a.prototype.hasName=function(t){if(!t)return!1;var e=this._name;return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},a.prototype.removeName=function(t){var e=(this._name||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name=e.join(" ")),this},a.prototype.destroy=function(){r(this._id,this);for(var t=(this._name||"").split(/\s/g),e=0;e<t.length;e++){var n=t[e];l(n,this.uid)}return this.remove(),this},a.prototype.show=function(){return this.visible=!0,this},a.prototype.hide=function(){return this.visible=!1,this},a);function a(t){this.attrs={},t=t||{},this.uid=n++,this._id=null==t.id?"":t.id,this._name=null==t.name?"":t.name,null!=t.position?(this._x=null==t.position.x?0:t.position.x,this._y=null==t.position.y?0:t.position.y):(this._x=null==t.x?0:t.x,this._y=null==t.y?0:t.y),null!=t.size?(this._width=null==t.size.width?0:t.size.width,this._height=null==t.size.height?0:t.size.height):(this._width=null==t.width?0:t.width,this._height=null==t.height?0:t.height),this._rotation=null==t.rotation?0:t.rotation,null!=t.scale?(this._scaleX=null==t.scale.x?1:t.scale.x,this._scaleY=null==t.scale.y?1:t.scale.y):(this._scaleX=null==t.scaleX?1:t.scaleX,this._scaleY=null==t.scaleY?1:t.scaleY),null!=t.skew?(this._skewX=null==t.skew.x?0:t.skew.x,this._skewY=null==t.skew.y?0:t.skew.y):(this._skewX=null==t.skewX?0:t.skewX,this._skewY=null==t.skewY?0:t.skewY),null!=t.offset?(this._offsetX=null==t.offset.x?0:t.offset.x,this._offsetY=null==t.offset.y?0:t.offset.y):(this._offsetX=null==t.offsetX?0:t.offsetX,this._offsetY=null==t.offsetY?0:t.offsetY),this._opacity=null==t.opacity?1:t.opacity,this._visible=null==t.visible?"inherit":t.visible,this._listening=null==t.listening?"inherit":t.listening,this._globalCompositeOperation=null==t.globalCompositeOperation?"source-over":t.globalCompositeOperation,this._transformsEnabled=null==t.transformsEnabled?"all":t.transformsEnabled}s.NodeBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.getGlobal=function(){return this._global},r.prototype.setGlobal=function(t){this._global=t},r.prototype.getCanvasRef=function(){return this._canvasRef},r.prototype.setCanvasRef=function(t){this._canvasRef=t},r.prototype.createImageElement=function(){return new this._global.Image},r.prototype.createImageData=function(){},r.prototype.createCanvasElement=function(){return this._global.document.createElement("canvas")},r.prototype.createOffScreenCanvasElement=function(){return this._global.document.createElement("canvas")},r.prototype.getDevicePixelRatio=function(){var t=this.createCanvasElement().getContext("2d");return(this._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},r.prototype.now=function(){return this._global.performance&&this._global.performance.now?this._global.performance.now():(new Date).getTime()},r.prototype.requestAnimationFrame=function(t){var e;if(this._global.requestAnimationFrame)e=this._global.requestAnimationFrame;else for(var n=["ms","moz","webkit","o"],i=0;i<n.length&&!e;++i)e=this._global[n[i]+"RequestAnimationFrame"];if(e)return e(t);var r=0,o=(new Date).getTime(),a=Math.max(0,16-(o-r)),s=this._global.setTimeout(function(){t(o+a)},a);return r=o+a,s},r.prototype.cancelAnimationFrame=function(t){var e;if(this._global.cancelAnimationFrame)e=this._global.cancelAnimationFrame;else for(var n=["ms","moz","webkit","o"],i=0;i<n.length&&!e;++i)e=this._global[n[i]+"CancelAnimationFrame"]||this._global[n[i]+"CancelRequestAnimationFrame"];e?e(t):clearTimeout(t)},r.prototype.getDummyContext=function(){return this._dummyContext||(this._dummyContext=this.createOffScreenCanvasElement().getContext("2d")),this._dummyContext},r);function r(){this._global=window,this._global&&(this.supportPointerEvents=void 0!==this._global.PointerEvent,this.supportTouchEvents=void 0!==this._global.TouchEvent),this.enableBuffer=!0}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.getGlobal=function(){return this._global},r.prototype.setGlobal=function(t){this._global=t},r.prototype.getCanvasRef=function(){return this._canvasRef},r.prototype.setCanvasRef=function(t){this._canvasRef=t},r.prototype.createImageElement=function(){return this._canvasRef?this._canvasRef.createImage():null},r.prototype.createImageData=function(){return this._canvasRef?this._canvasRef.createImageData():null},r.prototype.createCanvasElement=function(){return null},r.prototype.createOffScreenCanvasElement=function(){return null},r.prototype.getDevicePixelRatio=function(){return 1},r.prototype.now=function(){return(new Date).getTime()},r.prototype.requestAnimationFrame=function(t){var e=0,n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r},r.prototype.cancelAnimationFrame=function(t){clearTimeout(t)},r.prototype.getDummyContext=function(){return this._dummyContext?this._dummyContext:this._canvasRef?(this._dummyContext=this._canvasRef.getContext("2d"),this._dummyContext):null},r);function r(){this._global=wx,this.supportPointerEvents=!0,this.supportTouchEvents=!0,this.enableBuffer=!1}e.default=i},function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0});var e=(n.prototype.getGlobal=function(){return this._global},n.prototype.setGlobal=function(t){this._global=t},n.prototype.getCanvasRef=function(){return this._canvasRef},n.prototype.setCanvasRef=function(t){this._canvasRef=t},n.prototype.createImageElement=function(){var t=new this._global.canvas.Image;return t.style={},t},n.prototype.createImageData=function(){},n.prototype.createCanvasElement=function(){var t=new this._global.canvas.Canvas;return t.style={},t},n.prototype.createOffScreenCanvasElement=function(){var t=new this._global.canvas.Canvas;return t.style={},t},n.prototype.getDevicePixelRatio=function(){return 1},n.prototype.now=function(){return(new Date).getTime()},n.prototype.requestAnimationFrame=function(t){var e=0,n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r},n.prototype.cancelAnimationFrame=function(t){clearTimeout(t)},n.prototype.getDummyContext=function(){return this._dummyContext||(this._dummyContext=this.createOffScreenCanvasElement().getContext("2d")),this._dummyContext},n);function n(){this._global=t,this.supportPointerEvents=!1,this.supportTouchEvents=!1,this.enableBuffer=!0}i.default=e}).call(this,e(21))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(29),h=n(5),s=(o=a.ContextWrapper,r(l,o),l.prototype.fillShapeImpl=function(t){var e=t.fill,n=t.fillPriority;if(e&&"color"===n)this._fillColor(t);else{var i=t.fillPatternImage;if(i&&"pattern"===n)this._fillPattern(t);else{var r=t.fillLinearGradientColorStops&&0<t.fillLinearGradientColorStops.length;if(r&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.fillRadialGradientColorStops&&0<t.fillRadialGradientColorStops.length;o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},l.prototype.strokeShapeImpl=function(t){var e=t.dash,n=t.strokeScaleEnabled;if(t.hasStroke()){if(!n){this.save();var i=this.canvasPixelRatio;this.setTransform(i,0,0,i,0,0)}this.applyLineCap(t),e&&t.dashEnabled&&(this.setLineDash(e),this.lineDashOffset=t.dashOffset),this.lineWidth=t.strokeWidth,t.shadowForStrokeEnabled||(this.shadowColor="rgba(0,0,0,0)"),t.strokeLinearGradientColorStops&&0<t.strokeLinearGradientColorStops.length?this._strokeLinearGradient(t):this.strokeStyle=t.stroke,t._strokeFunc(this),n||this.restore()}},l.prototype.applyShadow=function(t){var e=this._get(t.getShadowRGBA(),"black"),n=this._get(t.shadowBlur,5),i=this._get(t.shadowOffset,{x:0,y:0}),r=t.getAbsoluteScale(),o=this.canvasPixelRatio,a=r.x*o,s=r.y*o;this.shadowColor=e,this.shadowBlur=n*Math.min(Math.abs(a),Math.abs(s)),this.shadowOffsetX=i.x*a,this.shadowOffsetY=i.y*s},l.prototype._fillColor=function(t){var e=t.fill;this.fillStyle=e,t._fillFunc(this)},l.prototype._fillPattern=function(t){var e=t.fillPatternX,n=t.fillPatternY,i=t.fillPatternRotation,r=h.default.angleDeg?i*(Math.PI/180):i,o=t.fillPatternOffsetX,a=t.fillPatternOffsetY,s=t.fillPatternScaleX,l=t.fillPatternScaleY;(e||n)&&this.translate(e||0,n||0),r&&this.rotate(r),(s||l)&&this.scale(s,l),(o||a)&&this.translate(-1*o,-1*a),this.fillStyle=t.getFillPattern(),t._fillFunc(this)},l.prototype._fillLinearGradient=function(t){var e=t.getLinearGradient();e&&(this.fillStyle=e,t._fillFunc(this))},l.prototype._fillRadialGradient=function(t){var e=t.getRadialGradient();e&&(this.fillStyle=e,t._fillFunc(this))},l.prototype._strokeLinearGradient=function(t){var e=t.strokeLinearGradientStartPoint,n=t.strokeLinearGradientEndPoint,i=t.strokeLinearGradientColorStops,r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i&&0<i.length){for(var o=0;o<i.length;o+=2)r.addColorStop(i[o],i[o+1]);this.strokeStyle=r}},l.prototype._get=function(t,e){return void 0===t?e:t},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.SceneContextWrapper=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.copy=function(){return new r(this.m)},r.prototype.point=function(t,e){var n=this.m;return{x:n[0]*t+n[2]*e+n[4],y:n[1]*t+n[3]*e+n[5]}},r.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},r.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=o,this.m[3]=a,this},r.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},r.prototype.skew=function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=o,this},r.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},r.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},r.prototype.getMatrix=function(){return this.m},r.prototype.setAbsolutePosition=function(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],o=this.m[3],a=this.m[4],s=(n*(e-this.m[5])-i*(t-a))/(n*o-i*r),l=(t-a-r*s)/n;return this.translate(l,s)},r);function r(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}e.Transform=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=n(13),_=n(22),i=n(14),y=n(3),b="canvas",r=(o.prototype.isCached=function(){return this._cache.containsKey("canvas")},o.prototype.getCache=function(t,e){var n=this._cache.getValue(t);return void 0===n&&(n=e.call(this._node),this._cache.setValue(t,n)),n},o.prototype.clearCache=function(t){t?this._cache.remove(t):this._cache.clear()},o.prototype.clearSelfAndDescendantCache=function(e){this.clearCache(e),this.getCanvasCache()||this._node.children&&this._node.children.forEach(function(t){t.caches.clearSelfAndDescendantCache(e)})},o.prototype.getCanvasCache=function(){return this._cache.getValue(b)},o.prototype.setCanvasCache=function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this._node.getClientRect({skipTransform:!0,relativeTo:this._node.getParent()}));var i=e.width||n.width,r=e.height||n.height,o=e.pixelRatio,a=void 0===e.x?n.x:e.x,s=void 0===e.y?n.y:e.y,l=e.offset||0,h=e.drawBorder||!1;if(i&&r){i+=2*l,r+=2*l,a-=l,s-=l;var c=new g.SceneCanvas({pixelRatio:o,width:i,height:r}),u=new _.HitCanvas({pixelRatio:1,width:i,height:r}),f=c.contextWrapper,p=u.contextWrapper,d=new g.SceneCanvas({pixelRatio:o,width:i,height:r});return u.isCache=!0,this._cache.remove(b),(this._node.updatedAfterInjection=!1)===e.imageSmoothingEnabled&&(c.contextWrapper.context.imageSmoothingEnabled=!1,u.contextWrapper.context.imageSmoothingEnabled=!1,d.contextWrapper.context.imageSmoothingEnabled=!1),f.save(),p.save(),f.translate(-a,-s),p.translate(-a,-s),this._node.isUnderCache=!0,this.clearSelfAndDescendantCache("absoluteOpacity"),this.clearSelfAndDescendantCache("absoluteScale"),this._node.drawScene(c,this._node,!0),this._node.drawHit(u,this._node,!0),this._node.isUnderCache=!1,f.restore(),p.restore(),h&&(f.save(),f.beginPath(),f.rect(0,0,i,r),f.closePath(),f.strokeStyle="red",f.lineWidth=5,f.stroke(),f.restore()),this._cache.setValue(b,{scene:c,hit:u,injector:d,x:a,y:s}),this}y.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},o.prototype.clearCanvasCache=function(){return this._cache.remove(b),this.clearSelfAndDescendantCache(),this},o.prototype.getCachedSceneCanvas=function(){var t=this._node.injectors,e=this.getCanvasCache(),n=e.scene,i=e.injector;if(t){if(!this._node.updatedAfterInjection){var r=n.pixelRatio;try{var o=i.contextWrapper;o.clear(),o.drawImage(n.canvasElement,0,0,n.width/r,n.height/r);for(var a=o.getImageData(0,0,i.width,i.height),s=0;s<t.length;s++)t[s].run(a),o.putImageData(a,0,0)}catch(t){y.error("Unable to apply injector. "+t.message)}this._node.updatedAfterInjection=!0}return i}return n},o.prototype.drawCachedSceneCanvas=function(t){t.save(),t.applyOpacity(this._node),t.applyGlobalCompositeOperation(this._node);var e=this.getCanvasCache();t.translate(e.x,e.y);var n=this.getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n.canvasElement,0,0,n.width/i,n.height/i),t.restore()},o.prototype.drawCachedHitCanvas=function(t){t.save(),t.applyGlobalCompositeOperation(this);var e=this.getCanvasCache();t.translate(e.x,e.y);var n=e.hit;t.drawImage(n.canvasElement,0,0),t.restore()},o);function o(t){this._cache=new i.Dictionary,this._node=t}e.NodeCaches=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(29),s=(o=a.ContextWrapper,r(l,o),l.prototype.fillShapeImpl=function(t){this.save(),this.fillStyle=t.colorKey,t._fillFuncHit(this),this.restore()},l.prototype.strokeShapeImpl=function(t){if(t.hasStroke()&&t.hitStrokeWidth){var e=t.strokeScaleEnabled;if(!e){this.save();var n=this.canvasPixelRatio;this.setTransform(n,0,0,n,0,0)}this.applyLineCap(t);var i=t.hitStrokeWidth,r="auto"===i?t.strokeWidth:i;this.lineWidth=r,this.strokeStyle=t.colorKey,t._strokeFuncHit(this),e||this.restore()}},l.prototype.applyShadow=function(t){},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.HitContextWrapper=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(17),u=n(23),a=n(15),f=n(5),s=n(1),o="mouseout",l="mouseleave",h="mouseover",p="mouseenter",d="mousemove",i="mousedown",g="mouseup",r="pointermove",_="pointerdown",y="pointerup",b="contextmenu",v="dblclick",m="touchstart",P="touchend",x="touchmove",w="wheel",O=[p,i,d,g,o,m,x,P,h,w,b,_,r,y,"pointercancel","lostpointercapture"],S=O.length,C=(E.prototype.bindContentEvents=function(){for(var t=0;t<S;t++)this.__addEvent(O[t])},E.prototype.mouseenter=function(t){this.setPointersPositions(t),this._stage.fire(p,{evt:t,target:this,currentTarget:this})},E.prototype.mousedown=function(t){if(a.default.isIEMobile)return this.touchstart(t);this.setPointersPositions(t);var e=this.__getFirstPointerId(t),n=this._stage.getIntersection(this._stage.getPointerPosition());f.default.listenClickTap=!0,n&&n.isListening()?(this.clickStartShape=n).fireAndBubble(i,{evt:t,pointerId:e}):this._stage.fire(i,{evt:t,target:this,currentTarget:this,pointerId:e}),this._stage.fire("contentMousedown",{evt:t})},E.prototype.mouseup=function(t){if(a.default.isIEMobile)return this.touchend(t);this.setPointersPositions(t);var e=this.__getFirstPointerId(t),n=this._stage.getIntersection(this._stage.getPointerPosition()),i=this.clickStartShape,r=this.clickEndShape,o=!1;f.default.inDblClickWindow?(o=!0,clearTimeout(this.dblTimeout)):c.default.justDragged?c.default&&(c.default.justDragged=!1):(f.default.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){this.inDblClickWindow=!1},f.default.dblClickWindow),n&&n.isListening()?((this.clickEndShape=n).fireAndBubble(g,{evt:t,pointerId:e}),f.default.listenClickTap&&i&&i.uid===n.uid&&(n.fireAndBubble("click",{evt:t,pointerId:e}),o&&r&&r===n&&n.fireAndBubble(v,{evt:t,pointerId:e}))):(this._stage.fire(g,{evt:t,target:this,currentTarget:this,pointerId:e}),f.default.listenClickTap&&this._stage.fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),o&&this._stage.fire(v,{evt:t,target:this,currentTarget:this,pointerId:e})),this._stage.fire("contentMouseup",{evt:t}),f.default.listenClickTap&&(this._stage.fire("contentClick",{evt:t}),o&&this._stage.fire("contentDblclick",{evt:t})),f.default.listenClickTap=!1,t.cancelable&&t.preventDefault()},E.prototype.mousemove=function(t){if(a.default.isIEMobile)return this.touchmove(t);this.setPointersPositions(t);var e,n=this.__getFirstPointerId(t),i=!c.default.isDragging||f.default.hitOnDragEnabled;if(i){if((e=this._stage.getIntersection(this._stage.getPointerPosition()))&&e.isListening()){var r=!this.targetShape||this.targetShape!==e;i&&r?(this.targetShape&&(this.targetShape.fireAndBubble(o,{evt:t,pointerId:n},e),this.targetShape.fireAndBubble(l,{evt:t,pointerId:n},e)),e.fireAndBubble(h,{evt:t,pointerId:n},this.targetShape),e.fireAndBubble(p,{evt:t,pointerId:n},this.targetShape),e.fireAndBubble(d,{evt:t,pointerId:n}),this.targetShape=e):e.fireAndBubble(d,{evt:t,pointerId:n})}else this.targetShape&&i&&(this.targetShape.fireAndBubble(o,{evt:t,pointerId:n}),this.targetShape.fireAndBubble(l,{evt:t,pointerId:n}),this._stage.fire(h,{evt:t,target:this,currentTarget:this,pointerId:n}),this.targetShape=null),this._stage.fire(d,{evt:t,target:this,currentTarget:this,pointerId:n});this._stage.fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},E.prototype.mouseover=function(t){this.setPointersPositions(t),this._stage.fire("contentMouseover",{evt:t}),this._stage.fire(h,{evt:t,target:this,currentTarget:this})},E.prototype.mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,n=!c.default.isDragging||f.default.hitOnDragEnabled;e&&n?(e.fireAndBubble(o,{evt:t}),e.fireAndBubble(l,{evt:t}),this.targetShape=null):n&&(this._stage.fire(l,{evt:t,target:this,currentTarget:this}),this._stage.fire(o,{evt:t,target:this,currentTarget:this})),this._stage.pointerPos=void 0,this._stage.pointerPositions=[],this._stage.fire("contentMouseout",{evt:t})},E.prototype.touchstart=function(n){var i=this;this.setPointersPositions(n);var r=!1;this._stage.changedPointerPositions.forEach(function(t){var e=i._stage.getIntersection(t);f.default.listenClickTap=!0,e&&e.isListening()&&(f.default.captureTouchEventsEnabled&&e.setPointerCapture(t.id),(i.tapStartShape=e).fireAndBubble(m,{evt:n,pointerId:t.id},i),r=!0,e.isListening()&&e.preventDefault&&n.cancelable&&n.preventDefault())}),r||this._stage.fire(m,{evt:n,target:this,currentTarget:this,pointerId:this._stage.changedPointerPositions[0].id}),this._stage.fire("contentTouchstart",{evt:n})},E.prototype.touchmove=function(n){var i=this;if(this.setPointersPositions(n),!c.default.isDragging||f.default.hitOnDragEnabled){var r=!1,o={};this._stage.changedPointerPositions.forEach(function(t){var e=u.getCapturedShape(t.id)||i._stage.getIntersection(t);e&&e.isListening()&&(o[e.uid]||(o[e.uid]=!0,e.fireAndBubble(x,{evt:n,pointerId:t.id}),r=!0,e.isListening()&&e.preventDefault&&n.cancelable&&n.preventDefault()))}),r||this._stage.fire(x,{evt:n,target:this,currentTarget:this,pointerId:this._stage.changedPointerPositions[0].id}),this._stage.fire("contentTouchmove",{evt:n})}c.default.isDragging&&c.default.node.preventDefault&&n.cancelable&&n.preventDefault()},E.prototype.touchend=function(n){var i=this;this.setPointersPositions(n);var r=this.clickEndShape,o=!1;f.default.inDblClickWindow?(o=!0,clearTimeout(this.dblTimeout)):c.default.justDragged||(f.default.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){this.inDblClickWindow=!1},f.default.dblClickWindow);var a=!1,s={},l=!1,h=!1;this._stage.changedPointerPositions.forEach(function(t){var e=u.getCapturedShape(t.id)||i._stage.getIntersection(t);e&&e.releaseCapture(t.id),e&&e.isListening()&&(s[e.uid]||(s[e.uid]=!0,(i.clickEndShape=e).fireAndBubble(P,{evt:n,pointerId:t.id}),a=!0,f.default.listenClickTap&&e===i.tapStartShape&&(l=!0,e.fireAndBubble("tap",{evt:n,pointerId:t.id}),o&&r&&r===e&&(h=!0,e.fireAndBubble("dbltap",{evt:n,pointerId:t.id}))),e.isListening()&&e.preventDefault&&n.cancelable&&n.preventDefault()))}),a||this._stage.fire(P,{evt:n,target:this,currentTarget:this,pointerId:this._stage.changedPointerPositions[0].id}),f.default.listenClickTap&&!l&&this._stage.fire("tap",{evt:n,target:this,currentTarget:this,pointerId:this._stage.changedPointerPositions[0].id}),o&&!h&&this._stage.fire("dbltap",{evt:n,target:this,currentTarget:this,pointerId:this._stage.changedPointerPositions[0].id}),this._stage.fire("contentTouchend",{evt:n}),f.default.listenClickTap&&(this._stage.fire("contentTap",{evt:n}),o&&this._stage.fire("contentDbltap",{evt:n})),f.default.listenClickTap=!1},E.prototype.pointerdown=function(t){if(f.default._pointerEventsEnabled){this.setPointersPositions(t);var e=u.getCapturedShape(t.pointerId)||this._stage.getIntersection(this._stage.getPointerPosition());e&&e.fireAndBubble(_,u.createEvent(t))}},E.prototype.pointerup=function(t){if(f.default._pointerEventsEnabled){this.setPointersPositions(t);var e=u.getCapturedShape(t.pointerId)||this._stage.getIntersection(this._stage.getPointerPosition());e&&e.fireAndBubble(y,u.createEvent(t)),u.releaseCapture(t.pointerId)}},E.prototype.pointermove=function(t){if(f.default._pointerEventsEnabled){this.setPointersPositions(t);var e=u.getCapturedShape(t.pointerId)||this._stage.getIntersection(this._stage.getPointerPosition());e&&e.fireAndBubble(r,u.createEvent(t))}},E.prototype.pointercancel=function(t){if(f.default._pointerEventsEnabled){this.setPointersPositions(t);var e=u.getCapturedShape(t.pointerId)||this._stage.getIntersection(this._stage.getPointerPosition());e&&e.fireAndBubble(y,u.createEvent(t)),u.releaseCapture(t.pointerId)}},E.prototype.wheel=function(t){this.setPointersPositions(t);var e=this._stage.getIntersection(this._stage.getPointerPosition());e&&e.isListening()?e.fireAndBubble(w,{evt:t}):this._stage.fire(w,{evt:t,target:this,currentTarget:this}),this._stage.fire("contentWheel",{evt:t})},E.prototype.contextmenu=function(t){this.setPointersPositions(t);var e=this._stage.getIntersection(this._stage.getPointerPosition());e&&e.isListening()?e.fireAndBubble(b,{evt:t}):this._stage.fire(b,{evt:t,target:this,currentTarget:this}),this._stage.fire("contentContextmenu",{evt:t})},E.prototype.lostpointercapture=function(t){u.releaseCapture(t.pointerId)},E.prototype.setPointersPositions=function(t){var e=this,n=this._stage.getContentPosition(),i=null,r=null;if(void 0!==(t=t||s.default.getGlobal().event).touches){if(this._stage.pointerPositions=[],this._stage.changedPointerPositions=[],Array.prototype.forEach.call(t.touches,function(t){t.clientX&&t.clientY?e._stage.pointerPositions.push({id:t.identifier,x:t.clientX-n.left,y:t.clientY-n.top}):e._stage.pointerPositions.push({id:t.identifier,x:t.x-n.left,y:t.y-n.top})}),Array.prototype.forEach.call(t.changedTouches||t.touches,function(t){t.clientX&&t.clientY?e._stage.changedPointerPositions.push({id:t.identifier,x:t.clientX-n.left,y:t.clientY-n.top}):e._stage.changedPointerPositions.push({id:t.identifier,x:t.x-n.left,y:t.y-n.top})}),0<t.touches.length){var o=t.touches[0];r=o.clientX&&o.clientY?(i=o.clientX-n.left,o.clientY-n.top):(i=o.x-n.left,o.y-n.top)}}else i=t.clientX-n.left,r=t.clientY-n.top,this._stage.pointerPos={x:i,y:r},this._stage.pointerPositions=[{x:i,y:r,id:this.__getFirstPointerId(t)}],this._stage.changedPointerPositions=[{x:i,y:r,id:this.__getFirstPointerId(t)}]},E.prototype.__getFirstPointerId=function(t){return t.touches?t.changedTouches[0].identifier:999},E.prototype.__addEvent=function(e){var n=this;n._stage.content.addEventListener(e,function(t){n[e](t)},!1)},E);function E(t){this._stage=t}e.StageEvents=C},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(10),s=n(22),l=n(0),h=n(7),c=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],u=c.length,f=(o=a.BaseLayer,r(p,o),Object.defineProperty(p.prototype,"hitGraphEnabled",{get:function(){return this._hitGraphEnabled},set:function(t){this._hitGraphEnabled=t,this.setAttr("hitGraphEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"size",{get:function(){if(this.parent)return this.parent.size},set:function(t){this.setCanvasSize(t.width,t.height)},enumerable:!0,configurable:!0}),p.prototype.setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this.checkSmooth()},p.prototype.validateAdd=function(t){var e=t.getType();if("Group"!==e&&"Shape"!==e)throw new Error("You may only add groups and shapes to a layer.")},p.prototype.getIntersection=function(t,e){var n,i,r,o;if(!this._hitGraphEnabled||!this.isVisible())return null;for(var a=1,s=!1;;){for(i=0;i<u;i++){if(r=c[i],(o=(n=this.__getIntersection({x:t.x+r.x*a,y:t.y+r.y*a})).shape)&&e)return o.findAncestor(e,!0);if(o)return o;if(s=!!n.antialiased,!n.antialiased)break}if(!s)return null;a+=1}},p.prototype.drawScene=function(t,e){var n=this.getLayer(),i=t||n&&n.canvas;return this.fire("beforeDraw",{node:this}),this.clearBeforeDraw&&i.contextWrapper.clear(),o.prototype.drawScene.call(this,i,e),this.fire("draw",{node:this}),this},p.prototype.drawHit=function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw&&n.hitCanvas.contextWrapper.clear(),o.prototype.drawHit.call(this,i,e),this},p.prototype.clear=function(t){return o.prototype.clear.call(this,t),this.hitCanvas.contextWrapper.clear(t),this},p.prototype.enableHitGraph=function(){return this._hitGraphEnabled=!0,this},p.prototype.disableHitGraph=function(){return this._hitGraphEnabled=!1,this},p.prototype.toggleHitCanvas=function(){if(this.parent&&t.content){var t=this.parent;this.hitCanvas.canvasElement.parentNode?t.content.removeChild(this.hitCanvas.canvasElement):t.content.appendChild(this.hitCanvas.canvasElement)}},p.prototype.__getIntersection=function(t){var e,n,i=this.hitCanvas.pixelRatio,r=this.hitCanvas.contextWrapper.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,o=r[3];return 255===o?(e=h.rgbToHex(r[0],r[1],r[2]),(n=l.shapes["#"+e])?{shape:n}:{antialiased:!0}):0<o?{antialiased:!0}:{}},p);function p(t){var e=o.call(this,t)||this;return t=t||{},e.nodeType="Layer",e._hitGraphEnabled=null==t.hitGraphEnabled||t.hitGraphEnabled,t.hitCanvasElement?e.hitCanvas=new s.HitCanvas({canvasElement:t.hitCanvasElement,offScreen:!1,pixelRatio:1}):e.hitCanvas=new s.HitCanvas({offScreen:!1,pixelRatio:1}),e}e.Layer=f},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),a=n(7);function s(){this.caches.clearCache("hasShadow")}function l(){this.caches.clearCache("shadowRGBA")}function h(){this.caches.clearCache("patternImage")}function c(){this.caches.clearCache("linearGradient")}function u(){this.caches.clearCache("radialGradient")}var f,p=(f=o.Node,r(d,f),Object.defineProperty(d.prototype,"lineCap",{get:function(){return this._lineCap},set:function(t){this._lineCap=t,this.setAttr("lineCap",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin=t,this.setAttr("lineJoin",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash=t,this.setAttr("dash",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"dashEnabled",{get:function(){return this._dashEnabled},set:function(t){this._dashEnabled=t,this.setAttr("dashEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"dashOffset",{get:function(){return this._dashOffset},set:function(t){this._dashOffset=t,this.setAttr("dashOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t,this.setAttr("fill",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillEnabled",{get:function(){return this._fillEnabled},set:function(t){this._fillEnabled=t,this.setAttr("fillEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientColorStops",{get:function(){return this._fillLinearGradientColorStops},set:function(t){this._fillLinearGradientColorStops=t,this.setAttr("fillLinearGradientColorStops",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientStartPointX",{get:function(){return this._fillLinearGradientStartPointX},set:function(t){this._fillLinearGradientStartPointX=t,this.setAttr("fillLinearGradientStartPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientStartPointY",{get:function(){return this._fillLinearGradientStartPointY},set:function(t){this._fillLinearGradientStartPointY=t,this.setAttr("fillLinearGradientStartPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientEndPointX",{get:function(){return this._fillLinearGradientEndPointX},set:function(t){this._fillLinearGradientEndPointX=t,this.setAttr("fillLinearGradientEndPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientEndPointY",{get:function(){return this._fillLinearGradientEndPointY},set:function(t){this._fillLinearGradientEndPointY=t,this.setAttr("fillLinearGradientEndPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientStartRadius",{get:function(){return this._fillRadialGradientStartRadius},set:function(t){this._fillRadialGradientStartRadius=t,this.setAttr("fillRadialGradientStartRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientEndRadius",{get:function(){return this._fillRadialGradientEndRadius},set:function(t){this._fillRadialGradientEndRadius=t,this.setAttr("fillRadialGradientEndRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientColorStops",{get:function(){return this._fillRadialGradientColorStops},set:function(t){this._fillRadialGradientColorStops=t,this.setAttr("fillRadialGradientColorStops",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientStartPointX",{get:function(){return this._fillRadialGradientStartPointX},set:function(t){this._fillRadialGradientStartPointX=t,this.setAttr("fillRadialGradientStartPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientStartPointY",{get:function(){return this._fillRadialGradientStartPointY},set:function(t){this._fillRadialGradientStartPointY=t,this.setAttr("fillRadialGradientStartPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientEndPointX",{get:function(){return this._fillRadialGradientEndPointX},set:function(t){this._fillRadialGradientEndPointX=t,this.setAttr("fillRadialGradientEndPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientEndPointY",{get:function(){return this._fillRadialGradientEndPointY},set:function(t){this._fillRadialGradientEndPointY=t,this.setAttr("fillRadialGradientEndPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternImage",{get:function(){return this._fillPatternImage},set:function(t){this._fillPatternImage=t,this.setAttr("fillPatternImage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternOffsetX",{get:function(){return this._fillPatternOffsetX},set:function(t){this._fillPatternOffsetX=t,this.setAttr("fillPatternOffsetX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternOffsetY",{get:function(){return this._fillPatternOffsetY},set:function(t){this._fillPatternOffsetY=t,this.setAttr("fillPatternOffsetY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternRepeat",{get:function(){return this._fillPatternRepeat},set:function(t){this._fillPatternRepeat=t,this.setAttr("fillPatternRepeat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternRotation",{get:function(){return this._fillPatternRotation},set:function(t){this._fillPatternRotation=t,this.setAttr("fillPatternRotation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternScaleX",{get:function(){return this._fillPatternScaleX},set:function(t){this._fillPatternScaleX=t,this.setAttr("fillPatternScaleX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternScaleY",{get:function(){return this._fillPatternScaleY},set:function(t){this._fillPatternScaleY=t,this.setAttr("fillPatternScaleY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternX",{get:function(){return this._fillPatternX},set:function(t){this._fillPatternX=t,this.setAttr("fillPatternX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternY",{get:function(){return this._fillPatternY},set:function(t){this._fillPatternY=t,this.setAttr("fillPatternY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPriority",{get:function(){return this._fillPriority},set:function(t){this._fillPriority=t,this.setAttr("fillPriority",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor=t,this.setAttr("shadowColor",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowEnabled",{get:function(){return this._shadowEnabled},set:function(t){this._shadowEnabled=t,this.setAttr("shadowEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowForStrokeEnabled",{get:function(){return this._shadowForStrokeEnabled},set:function(t){this._shadowForStrokeEnabled=t,this.setAttr("shadowForStrokeEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX=t,this.setAttr("shadowOffsetX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY=t,this.setAttr("shadowOffsetY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowOpacity",{get:function(){return this._shadowOpacity},set:function(t){this._shadowOpacity=t,this.setAttr("shadowOpacity",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur=t,this.setAttr("shadowBlur",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t,this.setAttr("stroke",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeEnabled",{get:function(){return this._strokeEnabled},set:function(t){this._strokeEnabled=t,this.setAttr("strokeEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeScaleEnabled",{get:function(){return this._strokeScaleEnabled},set:function(t){this._strokeScaleEnabled=t,this.setAttr("strokeScaleEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeHitEnabled",{get:function(){return this._strokeHitEnabled},set:function(t){this._strokeHitEnabled=t,this.setAttr("strokeHitEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t,this.setAttr("strokeWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientColorStops",{get:function(){return this._strokeLinearGradientColorStops},set:function(t){this._strokeLinearGradientColorStops=t,this.setAttr("strokeLinearGradientColorStops",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientStartPointX",{get:function(){return this._strokeLinearGradientStartPointX},set:function(t){this._strokeLinearGradientStartPointX=t,this.setAttr("strokeLinearGradientStartPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientStartPointY",{get:function(){return this._strokeLinearGradientStartPointY},set:function(t){this._strokeLinearGradientStartPointY=t,this.setAttr("strokeLinearGradientStartPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientEndPointX",{get:function(){return this._strokeLinearGradientEndPointX},set:function(t){this._strokeLinearGradientEndPointX=t,this.setAttr("strokeLinearGradientEndPointX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientEndPointY",{get:function(){return this._strokeLinearGradientEndPointY},set:function(t){this._strokeLinearGradientEndPointY=t,this.setAttr("strokeLinearGradientEndPointY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientStartPoint",{get:function(){return{x:this.fillLinearGradientStartPointX,y:this.fillLinearGradientStartPointY}},set:function(t){this.fillLinearGradientStartPointX=null==t.x?0:t.x,this.fillLinearGradientStartPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillLinearGradientEndPoint",{get:function(){return{x:this.fillLinearGradientEndPointX,y:this.fillLinearGradientEndPointY}},set:function(t){this.fillLinearGradientEndPointX=null==t.x?0:t.x,this.fillLinearGradientEndPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientStartPoint",{get:function(){return{x:this.fillRadialGradientStartPointX,y:this.fillRadialGradientStartPointY}},set:function(t){this.fillRadialGradientStartPointX=null==t.x?0:t.x,this.fillRadialGradientStartPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillRadialGradientEndPoint",{get:function(){return{x:this.fillRadialGradientEndPointX,y:this.fillRadialGradientEndPointY}},set:function(t){this.fillRadialGradientEndPointX=null==t.x?0:t.x,this.fillRadialGradientEndPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternOffset",{get:function(){return{x:this.fillPatternOffsetX,y:this.fillPatternOffsetY}},set:function(t){this.fillPatternOffsetX=null==t.x?0:t.x,this.fillPatternOffsetY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fillPatternScale",{get:function(){return{x:this.fillPatternScaleX,y:this.fillPatternScaleY}},set:function(t){this.fillPatternScaleX=null==t.x?0:t.x,this.fillPatternScaleY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shadowOffset",{get:function(){return{x:this.shadowOffsetX,y:this.shadowOffsetY}},set:function(t){this.shadowOffsetX=null==t.x?0:t.x,this.shadowOffsetY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientStartPoint",{get:function(){return{x:this.strokeLinearGradientStartPointX,y:this.strokeLinearGradientStartPointY}},set:function(t){this.strokeLinearGradientStartPointX=null==t.x?0:t.x,this.strokeLinearGradientStartPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"strokeLinearGradientEndPoint",{get:function(){return{x:this.strokeLinearGradientEndPointX,y:this.strokeLinearGradientEndPointY}},set:function(t){this.strokeLinearGradientEndPointX=null==t.x?0:t.x,this.strokeLinearGradientEndPointY=null==t.y?0:t.y},enumerable:!0,configurable:!0}),d.prototype.hasShadow=function(){return this.caches.getCache("hasShadow",this._hasShadow)},d.prototype._hasShadow=function(){return this._shadowEnabled&&0!==this._shadowOpacity&&!!(this._shadowColor||this._shadowBlur||this._shadowOffsetX||this._shadowOffsetY)},d.prototype.hasFill=function(){return!!(this._fill||this._fillPatternImage||this._fillLinearGradientColorStops&&0<this._fillLinearGradientColorStops.length||this._fillRadialGradientColorStops&&0<this._fillRadialGradientColorStops.length)},d.prototype.hasStroke=function(){return this._strokeEnabled&&this._strokeWidth&&!!(this._stroke||this._strokeLinearGradientColorStops&&0<this._strokeLinearGradientColorStops.length)},d.prototype.getShadowRGBA=function(){return this.caches.getCache("shadowRGBA",this.__getShadowRGBA)},d.prototype.__getShadowRGBA=function(){if(this.hasShadow()){var t=a.colorToRGBA(this._shadowColor);return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this._shadowOpacity||1)+")"}},d);function d(t){var e=f.call(this,t)||this;return t=t||{},e.nodeType="DisplayObject",e._lineCap=null==t.lineCap?"":t.lineCap,e._lineJoin=null==t.lineJoin?"":t.lineJoin,e._dash=null==t.dash?[]:t.dash,e._dashEnabled=null==t.dashEnabled||t.dashEnabled,e._dashOffset=null==t.dashOffset?0:t.dashOffset,e._fill=null==t.fill?void 0:t.fill,e._fillEnabled=null==t.fillEnabled||t.fillEnabled,e._fillLinearGradientColorStops=null==t.fillLinearGradientColorStops?[]:t.fillLinearGradientColorStops,null!=t.fillLinearGradientStartPoint?(e._fillLinearGradientStartPointX=null==t.fillLinearGradientStartPoint.x?0:t.fillLinearGradientStartPoint.x,e._fillLinearGradientStartPointY=null==t.fillLinearGradientStartPoint.y?0:t.fillLinearGradientStartPoint.y):(e._fillLinearGradientStartPointX=null==t.fillLinearGradientStartPointX?0:t.fillLinearGradientStartPointX,e._fillLinearGradientStartPointY=null==t.fillLinearGradientStartPointY?0:t.fillLinearGradientStartPointY),null!=t.fillLinearGradientEndPoint?(e._fillLinearGradientEndPointX=null==t.fillLinearGradientEndPoint.x?0:t.fillLinearGradientEndPoint.x,e._fillLinearGradientEndPointY=null==t.fillLinearGradientEndPoint.y?0:t.fillLinearGradientEndPoint.y):(e._fillLinearGradientEndPointX=null==t.fillLinearGradientEndPointX?0:t.fillLinearGradientEndPointX,e._fillLinearGradientEndPointY=null==t.fillLinearGradientEndPointY?0:t.fillLinearGradientEndPointY),e._fillRadialGradientStartRadius=null==t.fillRadialGradientStartRadiu?0:t.fillRadialGradientStartRadiu,e._fillRadialGradientEndRadius=null==t.fillRadialGradientEndRadius?0:t.fillRadialGradientEndRadius,e._fillRadialGradientColorStops=null==t.fillRadialGradientColorStops?[]:t.fillRadialGradientColorStops,null!=t.fillRadialGradientStartPoint?(e._fillRadialGradientStartPointX=null==t.fillRadialGradientStartPoint.x?0:t.fillRadialGradientStartPoint.x,e._fillRadialGradientStartPointY=null==t.fillRadialGradientStartPoint.y?0:t.fillRadialGradientStartPoint.y):(e._fillRadialGradientStartPointX=null==t.fillRadialGradientStartPointX?0:t.fillRadialGradientStartPointX,e._fillRadialGradientStartPointY=null==t.fillRadialGradientStartPointY?0:t.fillRadialGradientStartPointY),null!=t.fillRadialGradientEndPoint?(e._fillRadialGradientEndPointX=null==t.fillRadialGradientEndPoint.x?0:t.fillRadialGradientEndPoint.x,e._fillRadialGradientEndPointY=null==t.fillRadialGradientEndPoint.y?0:t.fillRadialGradientEndPoint.y):(e._fillRadialGradientEndPointX=null==t.fillRadialGradientEndPointX?0:t.fillRadialGradientEndPointX,e._fillRadialGradientEndPointY=null==t.fillRadialGradientEndPointY?0:t.fillRadialGradientEndPointY),e._fillPatternImage=null==t.fillPatternImage?null:t.fillPatternImage,null!=t.fillPatternOffset?(e._fillPatternOffsetX=null==t.fillPatternOffset.x?0:t.fillPatternOffset.x,e._fillPatternOffsetY=null==t.fillPatternOffset.y?0:t.fillPatternOffset.y):(e._fillPatternOffsetX=null==t.fillPatternOffsetX?0:t.fillPatternOffsetX,e._fillPatternOffsetY=null==t.fillPatternOffsetY?0:t.fillPatternOffsetY),e._fillPatternRepeat=null==t.fillPatternRepeat?"repeat":t.fillPatternRepeat,e._fillPatternRotation=null==t.fillPatternRotation?0:t.fillPatternRotation,null!=t.fillPatternScale?(e._fillPatternScaleX=null==t.fillPatternScale.x?0:t.fillPatternScale.x,e._fillPatternScaleY=null==t.fillPatternScale.y?0:t.fillPatternScale.y):(e._fillPatternScaleX=null==t.fillPatternScaleX?0:t.fillPatternScaleX,e._fillPatternScaleY=null==t.fillPatternScaleY?0:t.fillPatternScaleY),null!=t.fillPattern?(e._fillPatternX=null==t.fillPattern.x?0:t.fillPattern.x,e._fillPatternY=null==t.fillPattern.y?0:t.fillPattern.y):(e._fillPatternX=null==t.fillPatternX?0:t.fillPatternX,e._fillPatternY=null==t.fillPatternY?0:t.fillPatternY),e._fillPriority=null==t.fillPriority?"color":t.fillPriority,e._shadowColor=null==t.shadowColor?void 0:t.shadowColor,e._shadowEnabled=null==t.shadowEnabled||t.shadowEnabled,e._shadowForStrokeEnabled=null==t.shadowForStrokeEnabled||t.shadowForStrokeEnabled,null!=t.shadowOffset?(e._shadowOffsetX=null==t.shadowOffset.x?0:t.shadowOffset.x,e._shadowOffsetY=null==t.shadowOffset.y?0:t.shadowOffset.y):(e._shadowOffsetX=null==t.shadowOffsetX?0:t.shadowOffsetX,e._shadowOffsetY=null==t.shadowOffsetY?0:t.shadowOffsetY),e._shadowOpacity=null==t.shadowOpacity?1:t.shadowOpacity,e._shadowBlur=null==t.shadowBlur?"":t.shadowBlur,e._stroke=null==t.stroke?void 0:t.stroke,e._strokeEnabled=null==t.strokeEnabled||t.strokeEnabled,e._strokeScaleEnabled=null==t.strokeScaleEnabled||t.strokeScaleEnabled,e._strokeHitEnabled=null==t.strokeHitEnabled||t.strokeHitEnabled,e._strokeWidth=null==t.strokeWidth?1:t.strokeWidth,e._strokeLinearGradientColorStops=null==t.strokeLinearGradientColorStops?[]:t.strokeLinearGradientColorStops,null!=t.strokeLinearGradientStartPoint?(e._strokeLinearGradientStartPointX=null==t.strokeLinearGradientStartPoint.x?0:t.strokeLinearGradientStartPoint.x,e._strokeLinearGradientStartPointY=null==t.strokeLinearGradientStartPoint.y?0:t.strokeLinearGradientStartPoint.y):(e._strokeLinearGradientStartPointX=null==t.strokeLinearGradientStartPointX?0:t.strokeLinearGradientStartPointX,e._strokeLinearGradientStartPointY=null==t.strokeLinearGradientStartPointY?0:t.strokeLinearGradientStartPointY),null!=t.strokeLinearGradientEndPoint?(e._strokeLinearGradientEndPointX=null==t.strokeLinearGradientEndPoint.x?0:t.strokeLinearGradientEndPoint.x,e._strokeLinearGradientEndPointY=null==t.strokeLinearGradientEndPoint.y?0:t.strokeLinearGradientEndPoint.y):(e._strokeLinearGradientEndPointX=null==t.strokeLinearGradientEndPointX?0:t.strokeLinearGradientEndPointX,e._strokeLinearGradientEndPointY=null==t.strokeLinearGradientEndPointY?0:t.strokeLinearGradientEndPointY),e.on("shadowColorChange.__event shadowBlurChange.__event shadowOffsetChange.__event shadowOpacityChange.__event shadowEnabledChange.__event",s),e.on("shadowColorChange.__event shadowOpacityChange.__event shadowEnabledChange.__event",l),e.on("fillPriorityChange.__event fillPatternImageChange.__event fillPatternRepeatChange.__event fillPatternScaleXChange.__event fillPatternScaleYChange.__event",h),e.on("fillPriorityChange.__event fillLinearGradientColorStopsChange.__event fillLinearGradientStartPointXChange.__event fillLinearGradientStartPointYChange.__event fillLinearGradientEndPointXChange.__event fillLinearGradientEndPointYChange.__event",c),e.on("fillPriorityChange.__event fillRadialGradientColorStopsChange.__event fillRadialGradientStartPointXChange.__event fillRadialGradientStartPointYChange.__event fillRadialGradientEndPointXChange.__event fillRadialGradientEndPointYChange.__event fillRadialGradientStartRadiusChange.__event fillRadialGradientEndRadiusChange.__event",u),e}(e.DisplayObject=p).prototype._fillFunc=function(t){t.fill()},p.prototype._strokeFunc=function(t){t.stroke()},p.prototype._fillFuncHit=function(t){t.fill()},p.prototype._strokeFuncHit=function(t){t.stroke()}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(10),s=(o=a.BaseLayer,r(l,o),l.prototype.validateAdd=function(t){if("Shape"!==t.getType())throw new Error("You may only add shapes to a fast layer.")},l.prototype.setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.checkSmooth()},Object.defineProperty(l.prototype,"hitGraphEnabled",{get:function(){return!1},enumerable:!0,configurable:!0}),l.prototype.drawScene=function(t){var e=this.getLayer(),n=t||e&&e.canvas;return this.clearBeforeDraw&&n.contextWrapper.clear(),o.prototype.drawScene.call(this,n),this},l.prototype.draw=function(){return this.drawScene(),this},l);function l(t){var e=o.call(this,t)||this;return e.nodeType="FastLayer",e}e.FastLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),h=n(27),c=n(24),u=n(50),f=n(32),p=n(3),d=n(7),g=n(4),r=n(2),_={node:1,duration:1,easing:1,onFinish:1,yoyo:1},y=0,b=["fill","stroke","shadowColor"],o=(v.prototype._tweenFunc=function(t){var e,n,i,r,o,a,s,l,h=this.node,c=v.attrs[h.uid][this._id];for(e in c){if(i=(n=c[e]).start,r=n.diff,l=n.end,g.isArray(i))if(o=[],s=Math.max(i.length,l.length),0===e.indexOf("fill"))for(a=0;a<s;a++)a%2==0?o.push((i[a]||0)+r[a]*t):o.push("rgba("+Math.round(i[a].r+r[a].r*t)+","+Math.round(i[a].g+r[a].g*t)+","+Math.round(i[a].b+r[a].b*t)+","+(i[a].a+r[a].a*t)+")");else for(a=0;a<s;a++)o.push((i[a]||0)+r[a]*t);else o=-1!==b.indexOf(e)?"rgba("+Math.round(i.r+r.r*t)+","+Math.round(i.g+r.g*t)+","+Math.round(i.b+r.b*t)+","+(i.a+r.a*t)+")":i+r*t;h[e]=o}},v.prototype.play=function(){return this.tween.play(),this},v.prototype.reverse=function(){return this.tween.reverse(),this},v.prototype.reset=function(){return this.tween.reset(),this},v.prototype.seek=function(t){return this.tween.seek(1e3*t),this},v.prototype.pause=function(){return this.tween.pause(),this},v.prototype.finish=function(){return this.tween.finish(),this},v.prototype.destroy=function(){var t,e=this.node.uid,n=this._id,i=v.tweens[e];for(t in this.pause(),i)delete v.tweens[e][t];delete v.attrs[e][n]},v.prototype._addListeners=function(){var n=this;this.tween.onPlay=function(){n.anim.start()},this.tween.onReverse=function(){n.anim.start()},this.tween.onPause=function(){n.anim.stop()},this.tween.onFinish=function(){var t=n.node,e=v.attrs[t.uid][n._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),n.onFinish&&n.onFinish.call(n)},this.tween.onReset=function(){var t=n.node,e=v.attrs[t.uid][n._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),n.onReset&&n.onReset()}},v.prototype._prepareArrayForTween=function(t,e,n){var i,r=this,o=[],a=[];if(t.length>e.length){var s=e;e=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<e.length;i+=2)a.push({x:e[i],y:e[i+1]});var l=[];return a.forEach(function(t){var e=r._getProjectionToLine(t,o,n);l.push(e.x),l.push(e.y)}),l},v.prototype._getProjectionToLine=function(s,l,h){var c=this,u=r.cloneObject(s),f=Number.MAX_VALUE;return l.forEach(function(t,e){if(h||e!==l.length-1){var n=l[(e+1)%l.length],i=c._getProjectionToSegment(t.x,t.y,n.x,n.y,s.x,s.y),r=i[0],o=i[1],a=i[2];a<f&&(u.x=r,u.y=o,f=a)}}),u},v.prototype._getProjectionToSegment=function(t,e,n,i,r,o){var a,s,l,h=(t-n)*(t-n)+(e-i)*(e-i);if(0==h)a=t,s=e,l=(r-n)*(r-n)+(o-i)*(o-i);else{var c=((r-t)*(n-t)+(o-e)*(i-e))/h;l=c<0?((a=t)-r)*(t-r)+((s=e)-o)*(e-o):1<c?((a=n)-r)*(n-r)+((s=i)-o)*(i-o):((a=t+c*(n-t))-r)*(a-r)+((s=e+c*(i-e))-o)*(s-o)}return[a,s,l]},v.prototype.__addAttr=function(t,e){var n,i,r,o,a,s,l,h,c=this.node,u=c.uid;if((r=v.tweens[u][t])&&delete v.attrs[u][r][t],n=void 0!==c.getAttr(t)?c.getAttr(t):c[t],g.isArray(e))if(i=[],a=Math.max(e.length,n.length),"points"===t&&e.length!==n.length&&(e.length>n.length?(l=n,n=this._prepareArrayForTween(n,e,c.closed())):(s=e,e=this._prepareArrayForTween(e,n,c.closed()))),0===t.indexOf("fill"))for(o=0;o<a;o++)if(o%2==0)i.push(e[o]-n[o]);else{var f=d.colorToRGBA(n[o]);h=d.colorToRGBA(e[o]),n[o]=f,i.push({r:h.r-f.r,g:h.g-f.g,b:h.b-f.b,a:h.a-f.a})}else for(o=0;o<a;o++)i.push(e[o]-n[o]);else i=-1!==b.indexOf(t)?(n=d.colorToRGBA(n),{r:(h=d.colorToRGBA(e)).r-n.r,g:h.g-n.g,b:h.b-n.b,a:h.a-n.a}):e-n;v.attrs[u][this._id][t]={start:n,diff:i,end:e,trueEnd:s,trueStart:l},v.tweens[u][t]=this._id},v.attrs={},v.tweens={},v);function v(t){var e,n,i=this,r=t.node,o=r.uid,a=t.easing||f.Easings.Linear,s=!!t.yoyo;e=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=r,this._id=y++;var l=r.getLayer()||(r instanceof h.Stage?r.getLayers():null);for(n in l||p.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new c.Animation(function(){i.tween.onEnterFrame()},l),this.tween=new u.TweenEngine(n,function(t){i._tweenFunc(t)},a,0,1,1e3*e,s),this._addListeners(),v.attrs[o]||(v.attrs[o]={}),v.attrs[o][this._id]||(v.attrs[o][this._id]={}),v.tweens[o]||(v.tweens[o]={}),t)void 0===_[n]&&this.__addAttr(n,t[n]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset}e.Tween=o,i.Node.prototype.to=function(t){var e=this,n=t.onFinish;t.node=this,t.onFinish=function(){e.destroy(),n&&n()},new o(t).play()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.fire=function(t){var e=this[t];e&&e()},r.prototype.getTime=function(){return this._time},r.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},r.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},r.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},r.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},r.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},r.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},r.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},r.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},r.prototype.update=function(){this.setPosition(this.getPosition(this._time))},r.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},r.prototype.pause=function(){this.state=1,this.fire("onPause")},r.prototype.getTimer=function(){return(new Date).getTime()},r);function r(t,e,n,i,r,o,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}e.TweenEngine=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15);e.browser=i.default;var r=n(7);e.color=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.setAttr("innerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"outerRadius",{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.setAttr("outerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this.setAttr("angle",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"clockwise",{get:function(){return this._clockwise},set:function(t){this._clockwise=t,this.setAttr("clockwise",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this.getAngle(this._angle),n=this._clockwise;t.beginPath(),t.arc(0,0,this._outerRadius,0,e,n),t.arc(0,0,this._innerRadius,e,0,!n),t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!0,e.className="Arc",e._innerRadius=null==t.innerRadius?0:t.innerRadius,e._outerRadius=null==t.outerRadius?0:t.outerRadius,e._angle=null==t.angle?0:t.angle,e._clockwise=null!=t.clockwise&&t.clockwise,e}e.Arc=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var f,o=n(25),a=(f=o.Line,r(s,f),Object.defineProperty(s.prototype,"pointerLength",{get:function(){return this._pointerLength},set:function(t){this._pointerLength=t,this.setAttr("pointerLength",t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pointerWidth",{get:function(){return this._pointerWidth},set:function(t){this._pointerWidth=t,this.setAttr("pointerWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pointerAtBeginning",{get:function(){return this._pointerAtBeginning},set:function(t){this._pointerAtBeginning=t,this.setAttr("pointerAtBeginning",t)},enumerable:!0,configurable:!0}),s.prototype.sceneRender=function(t){f.prototype.sceneRender.call(this,t);var e=2*Math.PI,n=this.points,i=n,r=0!==this.tension&&4<n.length;r&&(i=this.getTensionPoints());var o,a,s=n.length;a=r?(o=n[s-2]-(i[i.length-2]+i[i.length-4])/2,n[s-1]-(i[i.length-1]+i[i.length-3])/2):(o=n[s-2]-n[s-4],n[s-1]-n[s-3]);var l=(Math.atan2(a,o)+e)%e,h=this.pointerLength,c=this.pointerWidth;t.save(),t.beginPath(),t.translate(n[s-2],n[s-1]),t.rotate(l),t.moveTo(0,0),t.lineTo(-h,c/2),t.lineTo(-h,-c/2),t.closePath(),t.restore(),this.pointerAtBeginning&&(t.save(),t.translate(n[0],n[1]),a=r?(o=(i[0]+i[2])/2-n[0],(i[1]+i[3])/2-n[1]):(o=n[2]-n[0],n[3]-n[1]),t.rotate((Math.atan2(-a,-o)+e)%e),t.moveTo(0,0),t.lineTo(-h,c/2),t.lineTo(-h,-c/2),t.closePath(),t.restore());var u=this.dashEnabled;u&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)},s);function s(t){var e=f.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Arrow",e._pointerLength=null==t.pointerLength?10:t.pointerLength,e._pointerWidth=null==t.pointerWidth?10:t.pointerWidth,e._pointerAtBeginning=null!=t.pointerAtBeginning&&t.pointerAtBeginning,e}e.Arrow=a},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.setAttr("radius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this._radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this._radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){t.beginPath(),t.arc(0,0,this._radius,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!0,e.className="Circle",e._radius=null==t.radius?0:t.radius,e}e.Circle=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"radius",{get:function(){return{x:this.radiusX,y:this.radiusY}},set:function(t){this.radiusX=t.x,this.radiusY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"radiusX",{get:function(){return this._radiusX},set:function(t){this._radiusX=t,this.setAttr("radiusX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"radiusY",{get:function(){return this._radiusY},set:function(t){this._radiusY=t,this.setAttr("radiusY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this.radiusX},set:function(t){this.radiusX=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this.radiusY},set:function(t){this.radiusY=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this.radiusX,n=this.radiusY;t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Ellipse",e._radiusX=null==t.radiusX?0:t.radiusX,e._radiusY=null==t.radiusY?0:t.radiusY,e}e.Ellipse=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=n(1),l=(o=a.Shape,r(h,o),Object.defineProperty(h.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this.setAttr("image",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"crop",{get:function(){return{x:this.cropX,y:this.cropY,width:this.cropWidth,height:this.cropHeight}},set:function(t){this.cropX=t.x,this.cropY=t.y,this.cropWidth=t.width,this.cropHeight=t.height},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"cropX",{get:function(){return this._cropX},set:function(t){this._cropX=t,this.setAttr("cropX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"cropY",{get:function(){return this._cropY},set:function(t){this._cropY=t,this.setAttr("cropY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"cropWidth",{get:function(){return this._cropWidth},set:function(t){this._cropWidth=t,this.setAttr("cropWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"cropHeight",{get:function(){return this._cropHeight},set:function(t){this._cropHeight=t,this.setAttr("cropHeight",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){var t=this._image;return this.attrs.width||(t?t.width:0)},set:function(t){o.prototype.setWidth.call(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){var t=this._image;return this.attrs.height||(t?t.height:0)},set:function(t){o.prototype.setHeight.call(this,t)},enumerable:!0,configurable:!0}),h.prototype.sceneRender=function(t){var e,n,i,r=this.width,o=this.height,a=this._image;a&&(e=this._cropWidth,n=this._cropHeight,i=e&&n?[a,this._cropX,this._cropY,e,n,0,0,r,o]:[a,0,0,r,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,i)},h.prototype.hitRender=function(t){var e=this.width,n=this.height;t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},h.prototype.useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},h.fromURL=function(t,e){var n=s.default.createImageElement();n.onload=function(){var t=new h({image:n});e(t)},n.crossOrigin="Anonymous",n.src=t},h);function h(t){var e=o.call(this,t)||this;t=t||{},e.centroid=!1,e.className="Image",e._image=t.image;var n=t.crop;return n?(e._cropX=null==n.x?0:n.x,e._cropY=null==n.y?0:n.y,e._cropWidth=null==n.width?0:n.width,e._cropHeight=null==n.height?0:n.height):(e._cropX=null==t.cropX?0:t.cropX,e._cropY=null==t.cropY?0:t.cropY,e._cropWidth=null==t.cropWidth?0:t.cropWidth,e._cropHeight=null==t.cropHeight?0:t.cropHeight),e}e.Image=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(18),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],l=s.length,h=(o=a.Group,r(c,o),c.prototype.getText=function(){return this.find("Text")[0]},c.prototype.getTag=function(){return this.find("Tag")[0]},c.prototype._addListeners=function(t){function e(){i._sync()}var n,i=this;for(n=0;n<l;n++)t.on(s[n]+"Change.__event",e)},c.prototype._sync=function(){var t,e,n,i,r,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width,e=s.height,n=l.pointerDirection,i=l.pointerWidth,a=l.pointerHeight,o=r=0,n){case"up":r=t/2,o=-1*a;break;case"right":r=t+i,o=e/2;break;case"down":r=t/2,o=e+a;break;case"left":r=-1*i,o=e/2}l.x=-1*r,l.y=-1*o,l.width=t,l.height=e,s.x=-1*r,s.y=-1*o}},c);function c(t){var e=o.call(this,t)||this;return t=t||{},e.on("add.__event",function(t){this._addListeners(t.child),this._sync()}),e}e.Label=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),p=n(34),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.setAttr("data",t)},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this.dataArray;t.beginPath();for(var n=0;n<e.length;n++){var i=e[n].command,r=e[n].points;switch(i){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var o=r[0],a=r[1],s=r[2],l=r[3],h=r[4],c=r[5],u=r[6],f=r[7],p=l<s?s:l,d=l<s?1:s/l,g=l<s?l/s:1;t.translate(o,a),t.rotate(u),t.scale(d,g),t.arc(0,0,p,h,h+c,1-f),t.scale(1/d,1/g),t.rotate(-u),t.translate(-o,-a);break;case"z":t.closePath()}}t.fillStrokeShape(this)},Object.defineProperty(l.prototype,"width",{get:function(){return this.getSelfRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return this.getSelfRect().height},enumerable:!0,configurable:!0}),l.prototype.getSelfRect=function(){var e=[];this.dataArray.forEach(function(t){e=e.concat(t.points)});for(var t,n,i=e[0],r=e[0],o=e[1],a=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],isNaN(t)||(i=Math.min(i,t),r=Math.max(r,t)),isNaN(n)||(o=Math.min(o,n),a=Math.max(a,n));return{x:Math.round(i),y:Math.round(o),width:Math.round(r-i),height:Math.round(a-o)}},l.prototype.getLength=function(){return this.pathLength},l.prototype.getPointAtLength=function(t){var e,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(e=this.dataArray[n-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[n].points.slice(0,2))[0],y:e[1]};var r=this.dataArray[n],o=r.points;switch(r.command){case"L":return p.PathTool.getPointOnLine(t,r.start.x,r.start.y,o[0],o[1]);case"C":return p.PathTool.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return p.PathTool.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],s=o[1],l=o[2],h=o[3],c=o[4],u=o[5],f=o[6];return c+=u*t/r.pathLength,p.PathTool.getPointOnEllipticalArc(a,s,l,h,c,f)}return null},l);function l(t){var e=o.call(this,t)||this;e.dataArray=[],e.pathLength=0,t=t||{},e.centroid=!1,e.className="Path",e._data=t.datas==[]?0:t.data,e.dataArray=p.PathTool.parsePathData(e._data);for(var n=e.pathLength=0;n<e.dataArray.length;++n)e.pathLength+=e.dataArray[n].pathLength;return e.on("dataChange.__event",function(){this.dataArray=p.PathTool.parsePathData(this._data);for(var t=this.pathLength=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}),e}e.Path=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(25),s=(o=a.Line,r(l,o),l.prototype.sceneRender=function(t){t.beginPath(),t.moveTo(this.points[0],this.points[1]);for(var e=2;e<this.points.length;e+=2)t.lineTo(this.points[e],this.points[e+1]);t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Polygon",e.closed=!0,e.bezier=!1,e.tension=0,e}e.Polygon=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.setAttr("radius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"sides",{get:function(){return this._sides},set:function(t){this._radius=t,this.setAttr("sides",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this._radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this._radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e,n,i,r=this.sides,o=this.radius;for(t.beginPath(),t.moveTo(0,0-o),e=1;e<r;e++)n=o*Math.sin(2*e*Math.PI/r),i=-1*o*Math.cos(2*e*Math.PI/r),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!0,e.className="RegularPolygon",e._radius=null==t.radius?0:t.radius,e._sides=null==t.sides?0:t.sides,e}e.RegularPolygon=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.setAttr("innerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"outerRadius",{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.setAttr("outerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){t.beginPath(),t.arc(0,0,this.innerRadius,0,2*Math.PI,!1),t.moveTo(this.outerRadius,0),t.arc(0,0,this.outerRadius,2*Math.PI,0,!0),t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!0,e.className="Ring",e._innerRadius=null==t.innerRadius?0:t.innerRadius,e._outerRadius=null==t.outerRadius?0:t.outerRadius,e}e.Ring=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.setAttr("radius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this.setAttr("angle",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"clockwise",{get:function(){return this._clockwise},set:function(t){this._clockwise=t,this.setAttr("clockwise",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this.radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this.radius},set:function(t){this.radius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){t.beginPath(),t.arc(0,0,this.radius,0,this.getAngle(this.angle),this.clockwise),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!0,e.className="Sector",e._radius=null==t.radius?0:t.radius,e._angle=null==t.angle?0:t.angle,e._clockwise=null!=t.clockwise&&t.clockwise,e}e.Sector=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=n(24),l=(o=a.Shape,r(h,o),Object.defineProperty(h.prototype,"frameIndex",{get:function(){return this._frameIndex},set:function(t){this._frameIndex=t,this.setAttr("frameIndex",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"animation",{get:function(){return this._animation},set:function(t){this._animation=t,this.setAttr("animation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this.setAttr("image",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"animations",{get:function(){return this._animations},set:function(t){this._animations=t,this.setAttr("animations",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"frameOffsets",{get:function(){return this._frameOffsets},set:function(t){this._frameOffsets=t,this.setAttr("frameOffsets",t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t,this.setAttr("frameRate",t)},enumerable:!0,configurable:!0}),h.prototype.sceneRender=function(t){var e=this._animation,n=this._frameIndex,i=4*n,r=this._animations[e],o=this._frameOffsets,a=r[0+i],s=r[1+i],l=r[2+i],h=r[3+i],c=this.image;if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,h),t.closePath(),t.fillStrokeShape(this)),c)if(o&&0<o.length){var u=o[e],f=2*n;t.drawImage(c,a,s,l,h,u[0+f],u[1+f],l,h)}else t.drawImage(c,a,s,l,h,0,0,l,h)},h.prototype.hitRender=function(t){var e=this._animation,n=this._frameIndex,i=4*n,r=this._animations[e],o=this._frameOffsets,a=r[2+i],s=r[3+i];if(t.beginPath(),o&&0<o.length){var l=o[e],h=2*n;t.rect(l[0+h],l[1+h],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},h.prototype.useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},h.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this._frameRate)},h.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},h.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},h.prototype.isRunning=function(){return this.anim.isRunning()},h.prototype._updateIndex=function(){var t=this.frameIndex,e=this.animation,n=this.animations[e].length/4;this.frameIndex=t<n-1?t+1:0},h);function h(t){var e=o.call(this,t)||this;return e._updated=!0,t=t||{},e.centroid=!1,e.className="Sprite",e._frameIndex=null==t.frameIndex?0:t.frameIndex,e._animation=null==t.animation?0:t.animation,e._image=null==t.image?0:t.image,e._animations=null==t.animations?[]:t.animations,e._frameOffsets=null==t.frameOffsets?[]:t.frameOffsets,e._frameRate=null==t.frameRate?17:t.frameRate,e.anim=new s.Animation(function(){var t=e._updated;return e._updated=!1,t}),e.on("animationChange.__event",function(){this._frameIndex=0}),e.on("frameIndexChange.__event",function(){this._updated=!0}),e.on("frameRateChange.__event",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),e}e.Sprite=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"numPoints",{get:function(){return this._numPoints},set:function(t){this._numPoints=t,this.setAttr("numPoints",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.setAttr("innerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"outerRadius",{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.setAttr("outerRadius",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"width",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return 2*this.outerRadius},set:function(t){this.outerRadius=t/2},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this.innerRadius,n=this.outerRadius,i=this.numPoints;t.beginPath(),t.moveTo(0,0-n);for(var r=1;r<2*i;r++){var o=r%2==0?n:e,a=o*Math.sin(r*Math.PI/i),s=-1*o*Math.cos(r*Math.PI/i);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Star",e._numPoints=null==t.numPoints?5:t.numPoints,e._innerRadius=null==t.innerRadius?0:t.innerRadius,e._outerRadius=null==t.outerRadius?0:t.outerRadius,e}e.Star=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(0),s=(o=a.Shape,r(l,o),Object.defineProperty(l.prototype,"pointerDirection",{get:function(){return this._pointerDirection},set:function(t){this._pointerDirection=t,this.setAttr("pointerDirection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pointerWidth",{get:function(){return this._pointerWidth},set:function(t){this._pointerWidth=t,this.setAttr("pointerWidth",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pointerHeight",{get:function(){return this._pointerHeight},set:function(t){this._pointerHeight=t,this.setAttr("pointerHeight",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t,this.setAttr("cornerRadius",t)},enumerable:!0,configurable:!0}),l.prototype.sceneRender=function(t){var e=this.width,n=this.height,i=this.pointerDirection,r=this.pointerWidth,o=this.pointerHeight,a=Math.min(this.cornerRadius,e/2,n/2);t.beginPath(),a?t.moveTo(a,0):t.moveTo(0,0),"up"===i&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+r)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===i&&(t.lineTo(e,(n-o)/2),t.lineTo(e+r,n/2),t.lineTo(e,(n+o)/2)),a?(t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1)):t.lineTo(e,n),"down"===i&&(t.lineTo((e+r)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-r)/2,n)),a?(t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,n),"left"===i&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},l.prototype.getSelfRect=function(){var t=0,e=0,n=this.pointerWidth,i=this.pointerHeight,r=this.pointerDirection,o=this.width,a=this.height;return"up"===r?(e-=i,a+=i):"down"===r?a+=i:"left"===r?(t-=1.5*n,o+=n):"right"===r&&(o+=1.5*n),{x:t,y:e,width:o,height:a}},l);function l(t){var e=o.call(this,t)||this;return t=t||{},e.centroid=!1,e.className="Tag",e._pointerDirection=null==t.pointerDirection?"none":t.pointerDirection,e._pointerWidth=null==t.pointerWidth?0:t.pointerWidth,e._pointerHeight=null==t.pointerHeight?0:t.pointerHeight,e._cornerRadius=null==t.cornerRadius?0:t.cornerRadius,e}e.Tag=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(4),l=n(3),h=n(15),j=n(30),R="auto",A="justify",c=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],u=c.length;var f,p=(f=o.Shape,r(d,f),Object.defineProperty(d.prototype,"width",{get:function(){return this.attrs.width===R||void 0===this.attrs.width?this.getTextWidth()+2*this._padding:this.attrs.width},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){return this.attrs.height===R||void 0===this.attrs.height?this._fontSize*this.textArr.length*this._lineHeight+2*this._padding:this.attrs.height},enumerable:!0,configurable:!0}),d.prototype.getTextWidth=function(){return this._textWidth},d.prototype.getTextHeight=function(){return l.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this._textHeight},Object.defineProperty(d.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t,this.setAttr("fontFamily",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.setAttr("fontSize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle=t,this.setAttr("fontStyle",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontStyle=t,this.setAttr("fontVariant",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"align",{get:function(){return this._align},set:function(t){this._fontStyle=t,this.setAttr("align",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing=t,this.setAttr("letterSpacing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign=t,this.setAttr("verticalAlign",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding=t,this.setAttr("padding",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this.setAttr("lineHeight",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"textDecoration",{get:function(){return this._textDecoration},set:function(t){this._textDecoration=t,this.setAttr("textDecoration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"text",{get:function(){return this._text},set:function(t){var e=s.isString(t)?t:(t||"").toString();this._text=e,this.setAttr("text",e)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"wrap",{get:function(){return this._wrap},set:function(t){this._wrap=t,this.setAttr("wrap",t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"ellipsis",{get:function(){return this._ellipsis},set:function(t){this._ellipsis=t,this.setAttr("ellipsis",t)},enumerable:!0,configurable:!0}),d.prototype.sceneRender=function(t){var e,n=this._padding,i=this._fontSize,r=this._lineHeight*i,o=this.textArr,a=o.length,s=this._verticalAlign,l=0,h=this._align,c=this.width,u=this._letterSpacing,f=this.fill,p=this._textDecoration,d=-1!==p.indexOf("underline"),g=-1!==p.indexOf("line-through"),_=0,y=(_=r/2,0),b=0;for(t.font=this._getContextFont(),t.textBaseline="middle",t.textAlign="left","middle"===s?l=(this.height-a*r-2*n)/2:"bottom"===s&&(l=this.height-a*r-2*n),t.translate(n,l+n),e=0;e<a;e++){b=y=0;var v,m,P,x=o[e],w=x.text,O=x.width,S=e!==a-1;if(t.save(),"right"===h?y+=c-O-2*n:"center"===h&&(y+=(c-O-2*n)/2),d&&(t.save(),t.beginPath(),t.moveTo(y,_+b+Math.round(i/2)),m=0==(v=w.split(" ").length-1),P=h===A&&S&&!m?c-2*n:O,t.lineTo(y+Math.round(P),_+b+Math.round(i/2)),t.lineWidth=i/15,t.strokeStyle=f,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(y,_+b),m=0==(v=w.split(" ").length-1),P=h===A&&S&&!m?c-2*n:O,t.lineTo(y+Math.round(P),_+b),t.lineWidth=i/15,t.strokeStyle=f,t.stroke(),t.restore()),0!==u||h===A){v=w.split(" ").length-1;for(var C=0;C<w.length;C++){var E=w[C];" "===E&&e!==a-1&&h===A&&(y+=Math.floor((c-2*n-O)/v)),this._partialTextX=y,this._partialTextY=_+b,this._partialText=E,t.fillStrokeShape(this),y+=Math.round(this._measureSize(E).width)+u}}else this._partialTextX=y,this._partialTextY=_+b,this._partialText=w,t.fillStrokeShape(this);t.restore(),1<a&&(_+=r)}},d.prototype.hitRender=function(t){var e=this.width,n=this.height;t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},d.prototype._measureSize=function(t){var e,n=a.default.getDummyContext(),i=this._fontSize;return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:i}},d.prototype._getContextFont=function(){return h.default.isIE?this._fontStyle+" "+this._fontSize+"px "+this._fontFamily:this._fontStyle+" "+this._fontVariant+" "+this._fontSize+"px "+this._fontFamily},d.prototype._addTextLine=function(t){this._align===A&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},d.prototype._getTextWidth=function(t){var e=this._letterSpacing,n=t.length,i=a.default.getDummyContext();i.save(),i.font=this._getContextFont();var r=i.measureText(t);return i.restore(),r.width+(n?e*(n-1):0)},d.prototype._setTextData=function(){var t=this._text.split("\n"),e=+this._fontSize,n=0,i=this._lineHeight*e,r=this.attrs.width,o=this.attrs.height,a=r!==R&&void 0!==r,s=o!==R&&void 0!==o,l=this._padding,h=r-2*l,c=o-2*l,u=0,f=this._wrap,p="none"!==f,d="char"!==f&&p,g=this._ellipsis&&!p;this.textArr=[];for(var _=g?this._getTextWidth("…"):0,y=0,b=t.length;y<b;++y){var v=t[y],m=this._getTextWidth(v);if(a&&h<m)for(;0<v.length;){for(var P=0,x=v.length,w="",O=0;P<x;){var S=P+x>>>1,C=v.slice(0,1+S),E=this._getTextWidth(C)+_;E<=h?(P=1+S,w=C+(g?"…":""),O=E):x=S}if(!w)break;if(d){var A,k=v[w.length];0<(A=(" "===k||"-"===k)&&O<=h?w.length:Math.max(w.lastIndexOf(" "),w.lastIndexOf("-"))+1)&&(P=A,w=w.slice(0,P),O=this._getTextWidth(w))}if(w=j.RTrim(w),this._addTextLine(w),n=Math.max(n,O),u+=i,!p||s&&c<u+i)break;if(v=v.slice(P),0<(v=j.LTrim(v)).length&&(m=this._getTextWidth(v))<=h){this._addTextLine(v),u+=i,n=Math.max(n,m);break}}else this._addTextLine(v),u+=i,n=Math.max(n,m);if(s&&c<u+i)break}this._textHeight=e,this._textWidth=n},d.prototype.getStrokeScaleEnabled=function(){return!0},d);function d(t){var e=f.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t))||this;e._partialTextX=0,e._partialTextY=0,t=t||{},e.centroid=!1,e.className="Text",e._fontFamily=null==t.fontFamily?"Arial":t.fontFamily,e._fontSize=null==t.fontSize?12:t.fontSize,e._fontStyle=null==t.fontStyle?"normal":t.fontStyle,e._fontVariant=null==t.fontVariant?"normal":t.fontVariant,e._align=null==t.align?"left":t.align,e._letterSpacing=null==t.letterSpacing?0:t.letterSpacing,e._verticalAlign=null==t.verticalAlign?"top":t.verticalAlign,e._padding=null==t.padding?0:t.padding,e._lineHeight=null==t.lineHeight?1:t.lineHeight,e._textDecoration=null==t.textDecoration?"":t.textDecoration,e._text=null==t.text?"":t.text,e._wrap=null==t.wrap?"word":t.wrap,e._ellipsis=null!=t.ellipsis&&t.ellipsis;for(var n=0;n<u;n++)e.on(c[n]+"Change.__event",e._setTextData);return e._setTextData(),e}(e.Text=p).prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},p.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),S=n(34),a=n(4),s=n(1),l=n(3),h=n(15),c=n(5);function u(t){t.fillText(this.partialText,0,0)}function f(t){t.strokeText(this.partialText,0,0)}var p,d=(p=o.Shape,r(g,p),Object.defineProperty(g.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t,this.setAttr("fontFamily",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.setAttr("fontSize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle=t,this.setAttr("fontStyle",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant=t,this.setAttr("fontVariant",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"align",{get:function(){return this._align},set:function(t){this._align=t,this.setAttr("align",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing=t,this.setAttr("letterSpacing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"text",{get:function(){return this._text},set:function(t){var e=a.isString(t)?t:(t||"").toString();this._text=e,this.setAttr("text",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.setAttr("data",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.setAttr("textBaseline",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textDecoration",{get:function(){return this._textDecoration},set:function(t){this._textDecoration=t,this.setAttr("textDecoration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"kerningFunc",{get:function(){return this._kerningFunc},set:function(t){this._kerningFunc=t,this.setAttr("kerningFunc",t)},enumerable:!0,configurable:!0}),g.prototype.sceneRender=function(t){t.font=this._getContextFont(),t.textBaseline=this._textBaseline,t.textAlign="left",t.save();var e=this._textDecoration,n=this.fill,i=this._fontSize,r=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<r.length;o++){t.save();var a=r[o].p0;t.translate(a.x,a.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()},g.prototype.hitRender=function(t){t.beginPath();var e=this.glyphInfo;if(1<=e.length){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var i=0;i<e.length;i++){var r=e[i].p1;t.lineTo(r.x,r.y)}t.lineWidth=this._fontSize,t.strokeStyle=this.colorKey,t.stroke()},g.prototype.getTextWidth=function(){return this.textWidth},g.prototype.getTextHeight=function(){return l.warn("text.getTextHeight() method is deprecated. Use text.height - for full height and text.fontSize - for one line height."),this.textHeight},g.prototype._getContextFont=function(){return this.__getContextFont()},g.prototype._getTextSize=function(t){var e=s.default.getDummyContext();e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},g.prototype._setTextData=function(){var h=this,t=this._getTextSize(this.attrs.text),c=this._letterSpacing,u=this._align,e=this._kerningFunc;this.textWidth=t.width,this.textHeight=t.height;var f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*c,0);this.glyphInfo=[];for(var p=0,n=0;n<h.dataArray.length;n++)0<h.dataArray[n].pathLength&&(p+=h.dataArray[n].pathLength);var i=0;"center"===u&&(i=Math.max(0,p/2-f/2)),"right"===u&&(i=Math.max(0,p-f));for(var d,g,_,r=this._text.split(""),y=this._text.split(" ").length-1,o=-1,b=0,v=function(){b=0;for(var t=h.dataArray,e=o+1;e<t.length;e++){if(0<t[e].pathLength)return t[o=e];"M"===t[e].command&&(d={x:t[e].points[0],y:t[e].points[1]})}return{}},a=function(t){var e=h._getTextSize(t).width+c;" "===t&&"justify"===u&&(e+=(p-f)/y);var n=0,i=0;for(g=void 0;.01<Math.abs(e-n)/e&&i<25;){i++;for(var r=n;void 0===_;)(_=v())&&r+_.pathLength<e&&(r+=_.pathLength,_=void 0);if(_==={}||void 0===d)return;var o=!1;switch(_.command){case"L":S.PathTool.getLineLength(d.x,d.y,_.points[0],_.points[1])>e?g=S.PathTool.getPointOnLine(e,d.x,d.y,_.points[0],_.points[1],d.x,d.y):_=void 0;break;case"A":var a=_.points[4],s=_.points[5],l=_.points[4]+s;0===b?b=a+1e-8:n<e?b+=Math.PI/180*s/Math.abs(s):b-=Math.PI/360*s/Math.abs(s),(s<0&&b<l||0<=s&&l<b)&&(b=l,o=!0),g=S.PathTool.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],b,_.points[6]);break;case"C":0===b?b=e>_.pathLength?1e-8:e/_.pathLength:n<e?b+=(e-n)/_.pathLength:b-=(n-e)/_.pathLength,1<b&&(b=1,o=!0),g=S.PathTool.getPointOnCubicBezier(b,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);break;case"Q":0===b?b=e/_.pathLength:n<e?b+=(e-n)/_.pathLength:b-=(n-e)/_.pathLength,1<b&&(b=1,o=!0),g=S.PathTool.getPointOnQuadraticBezier(b,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3])}void 0!==g&&(n=S.PathTool.getLineLength(d.x,d.y,g.x,g.y)),o&&(o=!1,_=void 0)}},s=h._getTextSize("C").width+c,l=0;l<i/s&&(a("C"),void 0!==d&&void 0!==g);l++)d=g;for(var m=0;m<r.length&&(a(r[m]),void 0!==d&&void 0!==g);m++){var P=S.PathTool.getLineLength(d.x,d.y,g.x,g.y),x=0;if(e)try{x=e(r[m-1],r[m])*this._fontSize}catch(t){x=0}d.x+=x,g.x+=x,this.textWidth+=x;var w=S.PathTool.getPointOnLine(x+P/2,d.x,d.y,g.x,g.y),O=Math.atan2(g.y-d.y,g.x-d.x);this.glyphInfo.push({transposeX:w.x,transposeY:w.y,text:r[m],rotation:O,p0:d,p1:g}),d=g}},g.prototype.getSelfRect=function(){var e=[];this.glyphInfo.forEach(function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)});for(var t,n,i=e[0],r=e[0],o=e[0],a=e[0],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],i=Math.min(i,t),r=Math.max(r,t),o=Math.min(o,n),a=Math.max(a,n);var l=this.fontSize;return{x:Math.round(i)-l/2,y:Math.round(o)-l/2,width:Math.round(r-i)+l,height:Math.round(a-o)+l}},g.prototype.__getContextFont=function(){return h.default.isIE?this._fontStyle+" "+this._fontSize+"px "+this._fontFamily:this._fontStyle+" "+this._fontVariant+" "+this._fontSize+"px "+this._fontFamily},g);function g(t){var e=p.call(this,t)||this;return e.dummyCanvas=s.default.createCanvasElement(),e.dataArray=[],t=t||{},e.centroid=!1,e.className="TextPath",e._fontFamily=null==t.fontFamily?"Arial":t.fontFamily,e._fontSize=null==t.fontSize?12:t.fontSize,e._fontStyle=null==t.fontStyle?"normal":t.fontStyle,e._fontVariant=null==t.fontVariant?"normal":t.fontVariant,e._align=null==t.align?"left":t.align,e._letterSpacing=null==t.letterSpacing?0:t.letterSpacing,e._text=null==t.text?"":t.text,e._data=null==t.data?"":t.data,e._textBaseline=null==t.textBaseline?"middle":t.textBaseline,e._textDecoration=null==t.textDecoration?"":t.textDecoration,e._kerningFunc=null==t.kerningFunc?null:t.kerningFunc,e.dataArray=S.PathTool.parsePathData(e._data),e.on("dataChange.__event",function(){this.dataArray=S.PathTool.parsePathData(this._data),this._setTextData()}),e.on("textChange.__event alignChange.__event letterSpacingChange.__event kerningFuncChange.__event",e._setTextData),c.default&&c.default.getKerning&&(l.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),e.kerningFunc(c.default.getKerning)),e._setTextData(),e}(e.TextPath=d).prototype._fillFunc=u,d.prototype._strokeFunc=f,d.prototype._fillFuncHit=u,d.prototype._strokeFuncHit=f},,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(27);e.Stage=i.Stage;var r=n(10);e.BaseLayer=r.BaseLayer;var o=n(46);e.Layer=o.Layer;var a=n(48);e.FastLayer=a.FastLayer;var s=n(0);e.Shape=s.Shape;var l=n(18);e.Group=l.Group;var h=n(12);e.Node=h.Node;var c=n(35);e.loader=c.default;var u=n(17);e.DD=u.default;var f=n(24);e.Animation=f.Animation;var p=n(49);e.Tween=p.Tween;var d=n(32);e.Easings=d.Easings;var g=n(5);e.config=g.default;var _=n(3);e.log=_;var y=n(1);e.adaptive=y.default;var b=n(51);e.util=b;var v=n(33);e.shapes=v;e.version="0.2.0"}],r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=78);function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,i});